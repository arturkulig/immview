!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.immview=e():t.immview=e()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";var n=r(1),i=r(2),o=r(3);e.Observable=o.Observable;var s=r(10);e.Origin=s.Origin;var u=r(9);e.Merge=u.Merge;var c=r(8);e.Domain=c.Domain;var a=r(7);e.action=a.action;var f=function(t){n.Dispatcher.push(t,i.DispatcherPriorities.EXTERNAL)};e.dispatch=f},function(t,e,r){"use strict";var n=r(6),i=r(2),o=new n.Dispatcher;e.Dispatcher=o;var s=function(t,e){void 0===e&&(e=i.DispatcherPriorities.EXTERNAL),o.push(t,e),o.run()};e.dispatch=s;var u=function(t,e){return void 0===e&&(e=i.DispatcherPriorities.EXTERNAL),new Promise(function(r,n){s(function(){try{r(t())}catch(t){console.error(t.stack||t.message||t),n(t)}},e)})};e.dispatchPromise=u},function(t,e){"use strict";var r;!function(t){t[t.OBSERVABLE=1]="OBSERVABLE",t[t.DOMAIN=2]="DOMAIN",t[t.BUFFER=3]="BUFFER",t[t.EXTERNAL=4]="EXTERNAL",t[t.TEST=10]="TEST"}(r=e.DispatcherPriorities||(e.DispatcherPriorities={}))},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=r(4),o=r(2),s=r(1),u="undefined"!=typeof Symbol?Symbol("ObservableSymbol"):"ObservableSymbol",c=function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e.of=function(){for(var t=[],r=0;arguments.length>r;r++)t[r]=arguments[r];return e.from(t)},e.from=function(t){if(t[u])return new e(function(e){t[u]().subscribe(e.next,e.error,e.complete)});if(t[Symbol.iterator])return new e(function(e){for(var r=e.next,n=e.error,i=e.complete,o=t[Symbol.iterator](),s=o.next();s.done===!1;s=o.next())s.value instanceof Error?n(s.value):r(s.value);i()});throw Error("Observable.from incorrect input")},e.prototype.map=function(t){var r=this;return new e(function(e){var n=r.subscribe(function(r){try{e.next(t(r))}catch(t){e.error(t)}},e.error,e.complete);return function(){return n.unsubscribe()}})},e.prototype.flatten=function(){var t=this;return new e(function(e){t.subscribe(function(t){t&&t.subscribe(function(t){e.next(t)},function(t){return e.error(t)})},e.error,e.complete)})},e.prototype.scan=function(t){var r=this;return new e(function(e){var n=null,i=r.subscribe(function(r){var i;try{i=n?t(r,n):r,n=i}catch(t){e.error(t)}e.next(i)},e.error,e.complete);return function(){return i.unsubscribe()}})},e.prototype.filter=function(t){var r=this;return new e(function(e){var n=r.subscribe(function(r){try{t(r)&&e.next(r)}catch(t){e.error(t)}},e.error,e.complete);return function(){return n.unsubscribe()}})},e.prototype.bufferCount=function(t,r){var n=this;void 0===r&&(r=null);var i=r||t,o=[];return new e(function(e){var r=n.subscribe(function(r){o.push(r),o.length===t&&(e.next(o.slice()),o=o.splice(i,t-i))},e.error,function(){o.length>t-i&&e.next(o.slice()),e.complete()});return function(){return r.unsubscribe()}})},e.prototype.buffer=function(t){var r=this;void 0===t&&(t=0);var n=[];return new e(function(e){var i=r.subscribe(function(r){n=t>0?[r].concat(n).splice(0,t):[r].concat(n),s.Dispatcher.push(function(){1>n.length||e.next(n.splice(0,n.length).reverse())},o.DispatcherPriorities.BUFFER).run()},e.error,function(){n.length>0&&e.next(n.splice(0,n.length).reverse()),e.complete()});return function(){return i.unsubscribe()}})},e}(i.BaseObservable);e.Observable=c,c.prototype[u]=function(){return this}},function(t,e,r){"use strict";var n,i=r(1),o=r(2),s=r(11),u=r(5);!function(t){t[t.Next=0]="Next",t[t.Error=1]="Error",t[t.Complete=2]="Complete"}(n=e.MessageTypes||(e.MessageTypes={}));var c=function(){},a=function(){function t(e){var r=this;return this.closed=!1,this.observers=[],this.priority=t.lastObservablePriority++,e?void(this.cancelSubscriber=e(new u.CustomObserver(c,function(t){r.pushMessage([n.Next,"function"==typeof t?t:function(){return t},c])},function(t){r.pushMessage([n.Error,t,c])},function(){r.pushMessage([n.Complete,,c])}))||c):void(this.cancelSubscriber=c)}return t.prototype.previous=function(){return this.lastValue},t.prototype.next=function(t){var e=this;return new Promise(function(r){return e.pushMessage([n.Next,"function"==typeof t?t:function(){return t},r])})},t.prototype.error=function(t){var e=this;return new Promise(function(r){return e.pushMessage([n.Error,t,r])})},t.prototype.complete=function(){var t=this;return new Promise(function(e){return t.pushMessage([n.Complete,,e])})},t.prototype.subscribe=function(){for(var e=this,r=[],n=0;arguments.length>n;n++)r[n]=arguments[n];if(this.closed)return new s.Subscription(null,function(){return!1});if("object"!=typeof r[0]||null===r[0]){var i=r[0],o=void 0===i?c:i,u=r[1],a=void 0===u?c:u,f=r[2],p=void 0===f?c:f;return this.subscribe({start:c,next:o,error:a,complete:p})}var l=r[0];this.observers.push(l);var h=new s.Subscription(function(){e.observers=e.observers.filter(function(t){return t!==l})},function(){return e.observers.indexOf(l)>-1});return l.start(h),t.dispatchDigestMessages(),h},t.prototype.pushMessage=function(e){this.closed||(t.awaitingMessages.push([this,e]),t.dispatchDigestMessages())},t.dispatchDigestMessages=function(){i.dispatch(t.digestAwaitingMessages,o.DispatcherPriorities.OBSERVABLE)},t.digestAwaitingMessages=function(){var e=t.popMessage(),r=e[0],n=e[1];r&&!r.closed&&(t.digestNodeMessage(r,n),t.dispatchDigestMessages())},t.popMessage=function(){if(0===t.awaitingMessages.length)return[null,null];for(var e=0;t.awaitingMessages.length>e;e++){var r=t.awaitingMessages[e],n=r[0],i=void 0===n?null:n,o=r[1];if(i.observers.length)return t.awaitingMessages.splice(e,1),[i,o]}return[null,null]},t.digestNodeMessage=function(t,e){var r=e[0],s=e[2];if(r===n.Next){var u=e,a=u[1],f=a(t.lastValue);t.lastValue=f,t.observers.forEach(function(t){return t.next(f)})}else if(r===n.Error){var p=e,l=p[1];t.observers.forEach(function(t){return t.error(l)})}else r===n.Complete&&(t.cancelSubscriber(),t.cancelSubscriber=c,t.closed=!0,t.observers.splice(0).forEach(function(t){return t.complete()}));i.dispatch(s,o.DispatcherPriorities.OBSERVABLE)},t}();a.awaitingMessages=[],a.lastObservablePriority=0,e.BaseObservable=a},function(t,e){"use strict";var r=function(){function t(t,e,r,n){this.start=t,this.next=e,this.error=r,this.complete=n}return t}();e.CustomObserver=r},function(t,e){"use strict";var r=function(){function t(){this.nextTickScheduler=null,this._isRunning=!1,this.tasks=[]}return Object.defineProperty(t.prototype,"isRunning",{get:function(){return!!this._isRunning},enumerable:!0,configurable:!0}),t.prototype.push=function(t,e){return void 0===e&&(e=0),this.tasks.push({priority:e,job:t}),this},t.prototype.run=function(){var t=this;if(!this._isRunning){this._isRunning=!0;var e=this.findNextJob();return e?void(this.nextTickScheduler=this.nextTickScheduler||Promise.resolve()).then(function(){t.next(function(){try{e.job()}catch(t){console.error(t.stack||t.message||t)}},function(){t._isRunning=!1,t.run()})}):(this.nextTickScheduler=null,void(this._isRunning=!1))}},t.prototype.findNextJob=function(){for(var t=null,e=0;this.tasks.length>e;e++)(null===t||this.tasks[t].priority>this.tasks[e].priority)&&(t=e);return null===t?null:this.tasks.splice(t,1)[0]},t.prototype.next=function(t,e){t(),e()},t}();e.Dispatcher=r},function(t,e,r){"use strict";function n(t,e,r){var n=r.value;r.value=function(){for(var t=this,e=[],r=0;arguments.length>r;r++)e[r]=arguments[r];return o.dispatchPromise(function(){n.apply(t,e)},i.DispatcherPriorities.DOMAIN)}}var i=r(2),o=r(1);e.action=n},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=r(3),o=r(1),s=function(t){function e(e){return t.call(this,function(t){e.subscribe(t.next,t.error,t.complete)})||this}return n(e,t),e.create=function(t,r,n){var i=new e(t);if(r){var s=function(t){return Object.prototype.hasOwnProperty.call(r,t)?void(i[t]=function(){for(var e=[],n=0;arguments.length>n;n++)e[n]=arguments[n];return o.dispatchPromise((s=r[t]).bind.apply(s,[i].concat(e)));var s}):"continue"};for(var u in r)s(u)}if(n)for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(i[c]=n[c]);return i},e}(i.Observable);e.Domain=s},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=this&&this.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;n>r;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},o=r(3),s=function(t){function e(e){return t.call(this,function(t){var r=[],n=[],o=[],s={},u=[],c=function(c){return Object.prototype.hasOwnProperty.call(e,c)?(r.push(c),void u.push(e[c].subscribe(function(e){if(o&&o.push([c,e]),n.indexOf(c)<0&&n.push(c),r.length===n.length){if(o){for(var u={},a=[],f=[],p=0;o.length>p;p++)if(a.indexOf(o[p][0])<0){var l=o[p],h=l[0],v=l[1];u[h]=v,a.push(h)}else f.push(o[p]);return t.next(s=u),f.forEach(function(e){var r=e[0],n=e[1];t.next(s=i({},s,(o={},o[r]=n,o)));var o}),void(o=null)}t.next(s=i({},s,(b={},b[c]=e,b)));var b}}))):"continue"};for(var a in e)c(a);return function(){u.forEach(function(t){return t()})}})||this}return n(e,t),e}(o.Observable);e.Merge=s},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=r(4),o=r(3),s=function(t){function e(e){var r=t.call(this,function(t){t.next(e)})||this;return r.lastValue=e,r}return n(e,t),e.prototype.push=function(t){var e=this;return new Promise(function(r){e.pushMessage([i.MessageTypes.Next,"function"==typeof t?t:function(){return t},r])})},e}(o.Observable);e.Origin=s},function(t,e){"use strict";var r=function(){function t(t,e){this.customUnsubscribe=t,this.isSubscriptionActive=e}return Object.defineProperty(t.prototype,"closed",{get:function(){return!this.isSubscriptionActive()},enumerable:!0,configurable:!0}),t.prototype.unsubscribe=function(){var t=this.customUnsubscribe;t&&(this.customUnsubscribe=null,t&&t())},t}();e.Subscription=r}])});
//# sourceMappingURL=immview.js.map