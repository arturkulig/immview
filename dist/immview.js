!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("immutable")):"function"==typeof define&&define.amd?define(["immutable"],e):"object"==typeof exports?exports.immview=e(require("immutable")):t.immview=e(t.immutable)}(this,function(t){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.dispatch=e.Dispatcher=e.Scan=e.Throttle=e.Debounce=e.Domain=e.View=e.Data=void 0;var i=n(1),u=r(i),o=n(11),s=r(o),c=n(6),a=r(c),f=n(8),l=r(f),d=n(9),h=r(d),p=n(10),m=r(p),b=n(2);e.Data=s.default,e.View=a.default,e.Domain=u.default,e.Debounce=l.default,e.Throttle=h.default,e.Scan=m.default,e.Dispatcher=b.Dispatcher,e.dispatch=b.dispatch},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!t.subscribe)throw Error(a+" stream source required");this.stream=t,u(this,e)}function u(t,e){if(!e)return void(t.actions=function(){return[]});var n=Object.keys(e);n.forEach(function(n){var r=e[n];if(void 0!==t[n])throw Error(""+a+n+" is reserved for Domain interface");if("function"!=typeof r)throw Error(""+a+n+" action is not a function");t[n]=function(){for(var e=arguments.length,n=Array(e),i=0;e>i;i++)n[i]=arguments[i];(0,o.dispatchDomainAction)(r,t,n)},t[n].originalLength=r.length||r.originalLength}),t._actionNames=n,t.actions=function(){return n}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var o=n(2),s=n(3),c=(r(s),function(){return null}),a="Immview::Domain: ";i.prototype={read:function(){return this.stream.read()},map:function(t){return this.stream.map(t)},debounce:function(t){return this.stream.debounce(t)},throttle:function(t){return this.stream.throttle(t)},scan:function(t,e){return this.stream.scan(t,e)},subscribe:function(t){return this.stream.subscribe(t)},addSubscription:function(t){return this.stream.addSubscription(t)},destroy:function(){var t=this;this.stream.destroy(),this.stream=null,(0,o.rejectContext)(this),this._actionNames.forEach(function(e){t[e]=c}),this._actionNames=null}}},function(t,e){"use strict";function n(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}function r(){var t=i();if(t){var e=t.context,n=t.action,r=t.args;n&&n.apply(e,r)}}function i(){var t=u();return b.splice(b.indexOf(t),1),t}function u(){for(var t=-1,e=null,n=0;b.length>n;n++){var r=b[n].priority;r>t&&(e=b[n],t=r)}return e}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:y;b.push({priority:r,action:t,context:e,args:n})}function s(t,e,n){l(t,e,n,g)}function c(t,e,n){l(t,e,n,_)}function a(t,e,n){l(t,e,n,D)}function f(t,e,n){l(t,e,n,y)}function l(t,e,n,r){o(t,e,n,r),d()}function d(){m||b.length>0&&(m=!0,j.tick(function(){try{r()}catch(t){h(t)}m=!1,d()}))}function h(t){j.logger.error(v+"Error occured while running a function"),"object"===(void 0===t?"undefined":n(t))?t.stack?j.logger.error(t.stack):j.logger.error(t.name,t.message):j.logger.error(t)}function p(t){b=b.filter(function(e){return e.context!==t})}Object.defineProperty(e,"__esModule",{value:!0});var m=!1,b=[],v="Immview::Dispatcher: ",y=0,g=1,_=2,D=3,j={dispatch:f,tick:function(t){t()},rejectContext:p,logger:console};e.default=j,e.Dispatcher=j,e.dispatch=l,e.dispatchDomainAction=s,e.dispatchDataWrite=c,e.dispatchDataConsume=a,e.dispatchExternal=f,e.rejectContext=p},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(){this._id=i.lastInstanceId++,this._subscriptions=[],this.closed=!1}function u(t,e){return o(e)&&(!o(t)||!(0,c.is)(e,t))}function o(t){return void 0!==t&&null!==t}function s(t){return t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var c=n(4),a=n(5),f=r(a),l=n(2),d=r(l);i.lastInstanceId=0,i.prototype={read:function(){return this.structure},_consume:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;f.queue(this,t,e)},_digest:function(t){u(this.structure,t)&&(this.structure=t,this._flush(t))},_flush:function(t){this._subscriptions.forEach(function(e){return e(t)})},addSubscription:function(t){var e=this;return this._subscriptions.indexOf(t)<0&&this._subscriptions.push(t),function(){e._subscriptions=e._subscriptions.filter(function(e){return e!==t})}},subscribe:function(t){return t(this.read()),this.addSubscription(t)},destroy:function(){d.rejectContext(this),this.structure=null,this._subscriptions=[],Object.defineProperty?Object.defineProperty(this,"closed",{value:!0,writable:!1}):this.closed=!0},map:function(t){var e=n(6).default;return new e(this,t)},debounce:function(t){var e=n(8).default;return new e(this,t)},throttle:function(t){var e=n(9).default;return new e(this,t)},scan:function(t,e){var r=n(10).default;return new r(this,t,e)}}},function(e,n){e.exports=t},function(t,e,n){"use strict";function r(t,e,n){(0,c.dispatchDataConsume)(function(){i(t,e,n),u()})}function i(t,e,n){for(var r=0;a.length>r;r++){if(a[r].observable._id===t._id)return void(a[r].data=e);if(a[r].observable._id>t._id)return void a.splice(r,0,{observable:t,data:e,process:n})}a.splice(a.length,0,{observable:t,data:e,process:n})}function u(){(0,c.dispatchDataWrite)(o)}function o(){if(a.length){var t=a.splice(0,1),e=s(t,1),n=e[0],r=n.observable,i=n.data,o=n.process;r._digest(o(i)),u()}}var s=function(){function t(t,e){var n=[],r=!0,i=!1,u=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(c){i=!0,u=c}finally{try{!r&&s.return&&s.return()}finally{if(i)throw u}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(e,"__esModule",{value:!0}),e.queue=r;var c=n(2),a=[]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;if(d.default.call(this),t&&"object"===(void 0===t?"undefined":i(t)))return void(this.unsubs=t.subscribe?s(this,t,e):c(this,t,e));throw Error(h+"No sources to plug in")}function o(t){return t}function s(t,e,n){return t._digest(n(e.read())),[e.addSubscription(function(e){return t._consume(e,n)})]}function c(t,e,n){var r=new f.default,i=Object.keys(e);i.forEach(function(t){var n=e[t],i=n.read();r=r.set(t,i)});var u=i.map(function(i){return e[i].addSubscription(function(e){r=r.set(i,e),t._consume(r.clone(),n)})});return t._digest(n(r.clone())),u}Object.defineProperty(e,"__esModule",{value:!0}),e.default=u;var a=n(7),f=r(a),l=n(3),d=r(l),h="Immview::View: ";u.prototype=Object.create(d.default.prototype),u.prototype.destroy=function(){d.default.prototype.destroy.call(this),this.unsubs&&this.unsubs.forEach(function(t){return t()}),this.unsubs=null}},function(t,e){"use strict";function n(t){return Array.isArray(t)?t:Array.from(t)}function r(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}function i(t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(this[e]=t[e])}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i,i.prototype={clone:function(){return new i(this)},set:function(t,e){var n=new i(this);return n[t]=e,n},get:function(t){return this[t]},map:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,n=new i;for(var r in this)Object.prototype.hasOwnProperty.call(this,r)&&(n[r]=t.call(e,this[r]));return n},toJS:function(){return this.map(function(t){return"object"===(void 0===t?"undefined":r(t))&&"function"==typeof t.toJS?t.toJS():t})},toObject:function(){return this},getIn:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=n(t),r=e[0],i=e.slice(1),u=arguments[1];return i.length?this.get(r).getIn(i,u):void 0===this.get(r)?u:this.get(r)},setIn:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=n(t),r=e[0],u=e.slice(1),o=arguments[1];return u.length?this.set(r,(this.get(r)||new i).setIn(u,o)):this.set(r,o)}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(o.default.call(this),!t||!t.subscribe)throw Error(s+"incorrect source");this.timeoutID=null,this._digest(t.read()),this.subscription=t.addSubscription(function(t){e.timeoutID&&clearTimeout(e.timeoutID),e.timeoutID=setTimeout(function(){e.timeoutID=null,e._consume(t)},n)})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var u=n(3),o=r(u),s="Immview::Debounce: ";i.prototype=Object.create(o.default.prototype),i.prototype.destroy=function(){this.timeoutID&&(clearTimeout(this.timeoutID),this.timeoutID=null),this.subscription&&this.subscription(),o.default.prototype.destroy.call(this)}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(o.default.call(this),!t||!t.subscribe)throw Error(s+"incorrect source");this.timeoutID=null,this.timeoutedData=null,this._digest(t.read()),this.subscription=t.addSubscription(function(t){e.timeoutedData=t,e.timeoutID||(e.timeoutID=setTimeout(function(){e.timeoutID=null,e._consume(e.timeoutedData)},n))})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var u=n(3),o=r(u),s="Immview::Throttle: ";i.prototype=Object.create(o.default.prototype),i.prototype.destroy=function(){this.timeoutID&&(clearTimeout(this.timeoutID),this.timeoutID=null),this.subscription&&this.subscription(),o.default.prototype.destroy.call(this)}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;c.default.apply(this);var i=o(u(r,n),n,t.read());this._digest(i),this.unsubscribe=t.addSubscription(function(t){i=o(i,n,t),e._consume(i)})}function u(t,e){if(null===t)return[];for(var n=[],r=0;e>r;r++)n.push(t);return n}function o(t,e,n){var r=t.slice(-1*e+1);return r.push(n),r}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var s=n(3),c=r(s);i.prototype=Object.create(c.default.prototype),i.prototype.read=function(){return[].concat(c.default.prototype.read.apply(this))},i.prototype.destroy=function(){c.default.prototype.destroy.apply(this),this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t){s.default.call(this),this._digest(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var u=n(2),o=n(3),s=r(o);i.prototype=Object.create(s.default.prototype),i.prototype.write=function(t){var e=this;(0,u.dispatchDataWrite)(function(){e.closed||e._digest("function"==typeof t?t(e.read()):t)},this)}}])});
//# sourceMappingURL=immview.js.map