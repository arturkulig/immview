{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap c04d4833af6686e592af","webpack:///./src/index.js","webpack:///./src/Domain.js","webpack:///./src/Queue.js","webpack:///external \"immutable\"","webpack:///./src/Data.js","webpack:///./src/View.js","webpack:///./src/Reactor.js"],"names":["_interopRequireDefault","obj","__esModule","default","Object","defineProperty","exports","value","Domain","View","Data","undefined","_Domain","require","_Domain2","_Data","_Data2","_View","_View2","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","_Queue","_Queue2","noop","errorPrefix","stream","actions","this","_claimStream","_claimActions","isReactor","Error","_this","_actionNames","keys","forEach","actionName","createAction","read","nextProcessor","map","reaction","subscribe","appendReactor","_this2","destroy","rejectContext","get","_interopRequireWildcard","newObj","hasOwnProperty","call","_typeof","Symbol","constructor","action","context","_len","arguments","args","Array","_key","runInQueue","appendToQueue","queue","add","startQueue","shiftFromQueue","toRun","first","rest","filter","item","isRunning","count","tick","runFirst","e","logError","func","console","error","stack","name","message","apply","_immutable","I","OrderedSet","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","setPrototypeOf","__proto__","_Reactor2","_Reactor3","_Reactor","initialData","getPrototypeOf","Iterable","isIterable","digest","fromJS","change","bypass","data","source","process","isDomain","connectToView","connectToViews","view","unsubs","views","_this3","mergedStructure","Map","viewsNames","viewName","viewData","set","digestMerged","hasValue","v","shouldStructureBeReplaced","structure","candidate","is","Reactor","reactors","Set","flush"],"mappings":"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","file":"immview.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"immutable\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"immutable\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"immview\"] = factory(require(\"immutable\"));\n\telse\n\t\troot[\"immview\"] = factory(root[\"immutable\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap c04d4833af6686e592af\n **/","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Domain = exports.View = exports.Data = undefined;\n\nvar _Domain = require('./Domain.js');\n\nvar _Domain2 = _interopRequireDefault(_Domain);\n\nvar _Data = require('./Data.js');\n\nvar _Data2 = _interopRequireDefault(_Data);\n\nvar _View = require('./View.js');\n\nvar _View2 = _interopRequireDefault(_View);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.Data = _Data2.default;\nexports.View = _View2.default;\nexports.Domain = _Domain2.default;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader?{\"presets\":[\"es2015\"]}!./src/index.js\n **/","'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _Queue = require('./Queue.js');\n\nvar _Queue2 = _interopRequireDefault(_Queue);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar noop = function noop() {\n    return null;\n};\n\nvar errorPrefix = 'Immview::Domain: ';\n\nvar Domain = (function () {\n    /**\n     * Create a domain holding a view\n     * @param {Reactor} stream\n     * @optional\n     * @param {Object.<function>} actions\n     */\n\n    function Domain(stream, actions) {\n        _classCallCheck(this, Domain);\n\n        this._claimStream(stream);\n        this._claimActions(actions);\n    }\n\n    /**\n     * @private\n     */\n\n    _createClass(Domain, [{\n        key: '_claimStream',\n        value: function _claimStream(stream) {\n            if (stream.isReactor) {\n                this.stream = stream;\n                return;\n            }\n\n            throw new Error(errorPrefix + ' provided stream is not inheriting from Reactor class');\n        }\n\n        /**\n         * @private\n         */\n\n    }, {\n        key: '_claimActions',\n        value: function _claimActions(actions) {\n            var _this = this;\n\n            /**\n             * @private\n             */\n            this._actionNames = actions ? Object.keys(actions) : [];\n\n            this._actionNames.forEach(function (actionName) {\n                if (_this[actionName]) {\n                    throw new Error('' + errorPrefix + actionName + ' is reserved for Domain interface');\n                }\n\n                if (typeof actions[actionName] !== 'function') {\n                    throw new Error('' + errorPrefix + actionName + ' action is not a function');\n                }\n\n                _this[actionName] = _Queue2.default.createAction(actions[actionName], _this);\n            });\n        }\n    }, {\n        key: 'read',\n\n        /**\n         * Retrieve last value on stream attached to the Domain\n         * @returns {Iterable}\n         */\n        value: function read() {\n            return this.stream.read();\n        }\n\n        /**\n         * Create a new stream from a stream attached to the Domain\n         * @param {function(Iterable)} nextProcessor\n         * @returns {View}\n         */\n\n    }, {\n        key: 'map',\n        value: function map(nextProcessor) {\n            return this.stream.map(nextProcessor);\n        }\n\n        // WRITE ?\n        // no write method now and in the future\n        // as it would encourage developers\n        // to modify domain data\n        // outside of the domain scope\n\n    }, {\n        key: 'subscribe',\n\n        /**\n         * Register a listener to changes on data stream.\n         * Calls provided method upon registration.\n         * @param reaction\n         * @returns {function()} unsubscribe\n         */\n        value: function subscribe(reaction) {\n            return this.stream.subscribe(reaction);\n        }\n\n        /**\n         * Register a listener to changes on data stream.\n         * @param reaction\n         * @returns {function()} unsubscribe\n         */\n\n    }, {\n        key: 'appendReactor',\n        value: function appendReactor(reaction) {\n            return this.stream.appendReactor(reaction);\n        }\n\n        /**\n         * Remove all subscriptions caused by the domain.\n         * Destroy stream attached to it.\n         * Cancel all currently dispatched actions.\n         */\n\n    }, {\n        key: 'destroy',\n        value: function destroy() {\n            var _this2 = this;\n\n            // destroy and unmount a structure\n            this.stream.destroy();\n            this.stream = null;\n\n            // remove all queued actions\n            _Queue2.default.rejectContext(this);\n\n            // unmount all domain methods\n            this._actionNames.forEach(function (actionName) {\n                _this2[actionName] = noop;\n            });\n            this._actionNames = null;\n        }\n    }, {\n        key: 'structure',\n        get: function get() {\n            return this.read();\n        }\n    }, {\n        key: 'isDomain',\n        get: function get() {\n            return true;\n        }\n    }]);\n\n    return Domain;\n})();\n\nexports.default = Domain;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader?{\"presets\":[\"es2015\"]}!./src/Domain.js\n **/","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _immutable = require('immutable');\n\nvar I = _interopRequireWildcard(_immutable);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _typeof(obj) { return obj && typeof Symbol !== \"undefined\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; }\n\nvar isRunning = false;\nvar queue = I.OrderedSet();\nvar errorPrefix = 'Immview::Queue: ';\n\nexports.default = {\n    createAction: createAction,\n    rejectContext: rejectContext,\n    runInQueue: runInQueue\n};\n\n/**\n * Returns a function that is queueable version of provided one.\n * @param {Function} action\n * @param {*} [context]\n * @returns {Function}\n */\n\nfunction createAction(action, context) {\n    return function () {\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        runInQueue(action, context, args);\n    };\n}\n\n/**\n * Append new action onto end of the queue\n * @param {Function} action\n * @param {*} context\n * @param {Array.<*>} args\n */\nfunction appendToQueue(action, context, args) {\n    queue = queue.add({\n        action: action,\n        context: context,\n        args: args\n    });\n}\n\nfunction runInQueue(action, context, args) {\n    appendToQueue(action, context, args);\n    startQueue();\n}\n\n/**\n * Removes and returns first action from the queue and\n * @returns {{action:Function,context,args:Array.<*>}}\n */\nfunction shiftFromQueue() {\n    var toRun = queue.first();\n    queue = queue.rest();\n    return toRun;\n}\n\n/**\n * Removes all queued actions tied with a context\n * @param context\n */\nfunction rejectContext(context) {\n    queue = queue.filter(function (item) {\n        return item.context !== context;\n    });\n}\n\n/**\n * Starts executing the queue\n */\nfunction startQueue() {\n    if (isRunning) {\n        return;\n    }\n\n    isRunning = true;\n\n    while (queue.count() > 0) {\n        try {\n            tick(runFirst);\n        } catch (e) {\n            logError(e);\n        }\n    }\n\n    isRunning = false;\n}\n\n// TODO make it replacable\nfunction tick(func) {\n    func();\n}\n\nfunction logError(e) {\n    console.error(errorPrefix + 'Error occured while running a function');\n    if ((typeof e === 'undefined' ? 'undefined' : _typeof(e)) === 'object') {\n        if (e.stack) {\n            console.error(e.stack);\n        } else {\n            console.error(e.name, e.message);\n        }\n    } else {\n        console.error(e);\n    }\n}\n\n/**\n * Execute first action of current queue\n */\nfunction runFirst() {\n    var toRun = shiftFromQueue();\n    var context = toRun.context;\n    var action = toRun.action;\n    var args = toRun.args;\n\n    action.apply(context, args);\n}\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader?{\"presets\":[\"es2015\"]}!./src/Queue.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"immutable\"\n ** module id = 3\n ** module chunks = 0\n **/","'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _immutable = require('immutable');\n\nvar _Queue = require('./Queue');\n\nvar _Queue2 = _interopRequireDefault(_Queue);\n\nvar _View = require('./View.js');\n\nvar _View2 = _interopRequireDefault(_View);\n\nvar _Reactor2 = require('./Reactor.js');\n\nvar _Reactor3 = _interopRequireDefault(_Reactor2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Data = (function (_Reactor) {\n    _inherits(Data, _Reactor);\n\n    function Data(initialData) {\n        _classCallCheck(this, Data);\n\n        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Data).call(this));\n\n        if (_immutable.Iterable.isIterable(initialData)) {\n            _this.digest(initialData);\n        } else {\n            _this.digest((0, _immutable.fromJS)(initialData));\n        }\n        return _this;\n    }\n\n    _createClass(Data, [{\n        key: 'write',\n\n        /**\n         * Dispatch a change instruction to the Data\n         * @param {Iterable|function(data: Iterable):Iterable} change\n         */\n        value: function write(change) {\n            var _this2 = this;\n\n            if (typeof change === 'function') {\n                _Queue2.default.runInQueue(function () {\n                    return _this2.digest(change(_this2.read()));\n                }, this);\n            } else {\n                _Queue2.default.runInQueue(this.digest, this, [change]);\n            }\n        }\n\n        /**\n         * Creates a View by digesting the stream\n         * @param {Function} nextProcessor\n         */\n\n    }, {\n        key: 'map',\n        value: function map(nextProcessor) {\n            return new _View2.default(this, nextProcessor);\n        }\n    }, {\n        key: 'isData',\n        get: function get() {\n            return true;\n        }\n    }]);\n\n    return Data;\n})(_Reactor3.default);\n\nexports.default = Data;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader?{\"presets\":[\"es2015\"]}!./src/Data.js\n **/","'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _immutable = require('immutable');\n\nvar _Reactor2 = require('./Reactor.js');\n\nvar _Reactor3 = _interopRequireDefault(_Reactor2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { return obj && typeof Symbol !== \"undefined\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar bypass = function bypass(data) {\n    return data;\n};\n\nvar View = (function (_Reactor) {\n    _inherits(View, _Reactor);\n\n    function View(source) {\n        var process = arguments.length <= 1 || arguments[1] === undefined ? bypass : arguments[1];\n\n        _classCallCheck(this, View);\n\n        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(View).call(this));\n\n        if (source && (typeof source === 'undefined' ? 'undefined' : _typeof(source)) === 'object') {\n            if (source.isReactor || source.isDomain) {\n                _this.connectToView(source, process);\n            } else {\n                _this.connectToViews(source, process);\n            }\n        }\n        return _this;\n    }\n\n    _createClass(View, [{\n        key: 'connectToView',\n\n        /**\n         * @private\n         * @param {Reactor} view\n         */\n        value: function connectToView(view, process) {\n            var _this2 = this;\n\n            this.unsubs = [view.subscribe(function (data) {\n                return _this2.digest(process(data));\n            })];\n        }\n\n        /**\n         * @private\n         * @param {Object.<Reactor>} views\n         */\n\n    }, {\n        key: 'connectToViews',\n        value: function connectToViews(views, process) {\n            var _this3 = this;\n\n            // initialize as a map{string:Iterable}\n            var mergedStructure = (0, _immutable.Map)();\n\n            var viewsNames = Object.keys(views);\n\n            // prefill mergedStructure before launching subscriptions\n            viewsNames.forEach(function (viewName) {\n                var viewData = views[viewName].read();\n                if (viewData) {\n                    mergedStructure = mergedStructure.set(viewName, viewData);\n                }\n            });\n\n            var digestMerged = function digestMerged() {\n                return _this3.digest(process(mergedStructure));\n            };\n\n            // subscribe to all data changes in parent views\n            this.unsubs = viewsNames.map(function (viewName) {\n                return views[viewName].appendReactor(function (data) {\n                    mergedStructure = mergedStructure.set(viewName, data);\n                    digestMerged();\n                });\n            });\n\n            digestMerged();\n        }\n\n        /**\n         * Creates a View by digesting the stream\n         * @param {Function} nextProcessor\n         */\n\n    }, {\n        key: 'map',\n        value: function map(nextProcessor) {\n            return new View(this, nextProcessor);\n        }\n    }, {\n        key: 'destroy',\n        value: function destroy() {\n            _Reactor3.default.prototype.destroy.call(this);\n\n            if (this.unsubs) {\n                this.unsubs.forEach(function (func) {\n                    return func();\n                });\n            }\n\n            this.unsubs = null;\n        }\n    }, {\n        key: 'isView',\n        get: function get() {\n            return true;\n        }\n    }]);\n\n    return View;\n})(_Reactor3.default);\n\nexports.default = View;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader?{\"presets\":[\"es2015\"]}!./src/View.js\n **/","'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _immutable = require('immutable');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar hasValue = function hasValue(v) {\n    return v !== undefined && v !== null;\n};\n\nvar shouldStructureBeReplaced = function shouldStructureBeReplaced(structure, candidate) {\n    return hasValue(candidate) && (!hasValue(structure) || (0, _immutable.is)(candidate, structure) === false);\n};\n\nvar Reactor = (function () {\n    function Reactor() {\n        _classCallCheck(this, Reactor);\n\n        /**\n         * @private\n         */\n        this.reactors = (0, _immutable.Set)();\n    }\n\n    _createClass(Reactor, [{\n        key: 'read',\n        value: function read() {\n            return this.structure;\n        }\n    }, {\n        key: 'digest',\n        value: function digest(data) {\n            if (shouldStructureBeReplaced(this.structure, data)) {\n                this.structure = data;\n                this.flush();\n            }\n        }\n\n        /**\n         * @param {function} reaction\n         * @returns {function()}\n         */\n\n    }, {\n        key: 'appendReactor',\n        value: function appendReactor(reaction) {\n            var _this = this;\n\n            this.reactors = this.reactors.add(reaction);\n            return function () {\n                _this.reactors = _this.reactors.delete(reaction);\n            };\n        }\n\n        /**\n         * @param {function} reaction\n         * @returns {function()}\n         */\n\n    }, {\n        key: 'subscribe',\n        value: function subscribe(reaction) {\n            reaction(this.read());\n            return this.appendReactor(reaction);\n        }\n    }, {\n        key: 'flush',\n        value: function flush() {\n            var _this2 = this;\n\n            this.reactors.forEach(function (reaction) {\n                return reaction(_this2.read());\n            });\n        }\n    }, {\n        key: 'destroy',\n        value: function destroy() {\n            this.structure = null;\n            this.reactors = (0, _immutable.Set)();\n        }\n    }, {\n        key: 'isReactor',\n        get: function get() {\n            return true;\n        }\n    }]);\n\n    return Reactor;\n})();\n\nexports.default = Reactor;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader?{\"presets\":[\"es2015\"]}!./src/Reactor.js\n **/"],"sourceRoot":""}