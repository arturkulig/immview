{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap f1523440422ec995cb0b","webpack:///./src/index.js","webpack:///./src/Domain.js","webpack:///external \"immutable\"","webpack:///./src/Queue.js","webpack:///./src/Data.js","webpack:///./src/Reactor.js","webpack:///./src/ImmutableWrapper.js","webpack:///./src/View.js"],"names":["_interopRequireDefault","obj","__esModule","default","Object","defineProperty","exports","value","Domain","View","Data","undefined","_Domain","require","_Domain2","_Data","_Data2","_View","_View2","_interopRequireWildcard","newObj","key","prototype","hasOwnProperty","call","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","protoProps","staticProps","_immutable","I","_Queue","_Queue2","noop","view","actions","this","data","_actionNames","_claimView","_claimActions","isReactor","Error","isData","_this","keys","forEach","actionName","createAction","reaction","subscribe","_this2","destroy","rejectContext","get","structure","action","context","_len","arguments","args","Array","_key","appendToQueue","run","queue","add","shiftFromQueue","toRun","first","rest","filter","item","isRunning","count","runFirst","e","console","error","message","apply","OrderedSet","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","_Reactor2","_Reactor3","_require","immutableWriteWrapper","immutableReadWrapper","_Reactor","initialData","getPrototypeOf","digest","fromJS","reactors","Reactor","Set","newValue","process","flush","reactor","that","prop","_len2","_key2","_typeof","Symbol","_ImmutableWrapper","source","isDomain","connectToView","connectToViews","masterView","unsubs","bind","views","prestructure","Map","map","viewName","sub","set","func"],"mappings":"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","file":"immview.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"immutable\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"immutable\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"immview\"] = factory(require(\"immutable\"));\n\telse\n\t\troot[\"immview\"] = factory(root[\"immutable\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap f1523440422ec995cb0b\n **/","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Domain = exports.View = exports.Data = undefined;\n\nvar _Domain = require('./Domain.js');\n\nvar _Domain2 = _interopRequireDefault(_Domain);\n\nvar _Data = require('./Data.js');\n\nvar _Data2 = _interopRequireDefault(_Data);\n\nvar _View = require('./View.js');\n\nvar _View2 = _interopRequireDefault(_View);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.Data = _Data2.default;\nexports.View = _View2.default;\nexports.Domain = _Domain2.default;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader?{\"presets\":[\"es2015\"]}!./src/index.js\n **/","'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _immutable = require('immutable');\n\nvar I = _interopRequireWildcard(_immutable);\n\nvar _Queue = require('./Queue.js');\n\nvar _Queue2 = _interopRequireDefault(_Queue);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar noop = function noop() {};\n\nvar Domain = (function () {\n    /**\n     * Create a domain holding a view\n     * @param {Reactor} view\n     */\n\n    function Domain(view, actions) {\n        _classCallCheck(this, Domain);\n\n        /** @type {View} */\n        this.view = null;\n        /** @type {Data} */\n        this.data = null;\n        /** @type {String[]} */\n        this._actionNames = null;\n\n        this._claimView(view);\n        this._claimActions(actions);\n    }\n\n    _createClass(Domain, [{\n        key: '_claimView',\n        value: function _claimView(view) {\n            if (view.isReactor) {\n                this.view = view;\n\n                if (view.isData) {\n                    this.data = view;\n                }\n            } else {\n                throw new Error('view is not inheriting Reactor type');\n            }\n        }\n    }, {\n        key: '_claimActions',\n        value: function _claimActions(actions) {\n            var _this = this;\n\n            this._actionNames = actions ? Object.keys(actions) : [];\n\n            this._actionNames.forEach(function (actionName) {\n                if (_this[actionName]) {\n                    throw new Error('\"' + actionName + '\" is reserved for Domain interface');\n                }\n\n                _this[actionName] = _Queue2.default.createAction(actions[actionName], _this);\n            });\n        }\n    }, {\n        key: 'subscribe',\n        value: function subscribe(reaction) {\n            return this.view.subscribe(reaction);\n        }\n    }, {\n        key: 'destroy',\n        value: function destroy() {\n            var _this2 = this;\n\n            // destroy and unmount a structure\n            this.view.destroy();\n            this.view = null;\n            this.data = null;\n\n            // remove all queued actions\n            _Queue2.default.rejectContext(this);\n\n            // unmount all domain methods\n            this._actionNames.forEach(function (actionName) {\n                _this2[actionName] = noop;\n            });\n            this._actionNames = null;\n        }\n    }, {\n        key: 'structure',\n        get: function get() {\n            return this.view && this.view.structure;\n        }\n    }, {\n        key: 'isDomain',\n        get: function get() {\n            return true;\n        }\n    }]);\n\n    return Domain;\n})();\n\nexports.default = Domain;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader?{\"presets\":[\"es2015\"]}!./src/Domain.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"immutable\"\n ** module id = 2\n ** module chunks = 0\n **/","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _immutable = require('immutable');\n\nvar I = _interopRequireWildcard(_immutable);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar isRunning = false;\nvar queue = I.OrderedSet();\n\n/**\n * Returns a function that is queueable version of provided one.\n * @param {Function} action\n * @param {*} [context]\n * @returns {Function}\n */\nfunction createAction(action, context) {\n    return function () {\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        appendToQueue(action, context, args);\n        run();\n    };\n}\n\n/**\n * Append new action onto end of the queue\n * @param {Function} action\n * @param {*} context\n * @param {Array.<*>} args\n */\nfunction appendToQueue(action, context, args) {\n    queue = queue.add({\n        action: action,\n        context: context,\n        args: args\n    });\n}\n\n/**\n * Removes and returns first action from the queue and\n * @returns {{action:Function,context,args:Array.<*>}}\n */\nfunction shiftFromQueue() {\n    var toRun = queue.first();\n    queue = queue.rest();\n    return toRun;\n}\n\n/**\n * Removes all queued actions tied with a context\n * @param context\n */\nfunction rejectContext(context) {\n    queue = queue.filter(function (item) {\n        return item.context !== context;\n    });\n}\n\n/**\n * Starts executing the queue\n */\nfunction run() {\n    if (isRunning) {\n        return;\n    }\n\n    isRunning = true;\n\n    while (queue.count() > 0) {\n        try {\n            runFirst();\n        } catch (e) {\n            console.error('Immview.Queue run - Error occured while running running a function');\n            console.error(e.message);\n        }\n    }\n\n    isRunning = false;\n}\n\n/**\n * Execute first action of current queue\n */\nfunction runFirst() {\n    var toRun = shiftFromQueue();\n    var context = toRun.context;\n    var action = toRun.action;\n    var args = toRun.args;\n\n    action.apply(context, args);\n}\n\nexports.default = {\n    createAction: createAction,\n    rejectContext: rejectContext\n};\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader?{\"presets\":[\"es2015\"]}!./src/Queue.js\n **/","'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _immutable = require('immutable');\n\nvar I = _interopRequireWildcard(_immutable);\n\nvar _Reactor2 = require('./Reactor.js');\n\nvar _Reactor3 = _interopRequireDefault(_Reactor2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _require = require('./ImmutableWrapper.js');\n\nvar immutableWriteWrapper = _require.immutableWriteWrapper;\nvar immutableReadWrapper = _require.immutableReadWrapper;\n\nvar Data = (function (_Reactor) {\n    _inherits(Data, _Reactor);\n\n    function Data(initialData) {\n        _classCallCheck(this, Data);\n\n        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Data).call(this));\n\n        immutableReadWrapper(_this);\n        immutableWriteWrapper(_this);\n\n        _this.digest(I.fromJS(initialData));\n        return _this;\n    }\n\n    _createClass(Data, [{\n        key: 'process',\n        value: function process(data) {\n            return data;\n        }\n    }, {\n        key: 'destroy',\n        value: function destroy() {\n            this.structure = null;\n            this.reactors = null;\n        }\n    }, {\n        key: 'isData',\n        get: function get() {\n            return true;\n        }\n    }]);\n\n    return Data;\n})(_Reactor3.default);\n\nexports.default = Data;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader?{\"presets\":[\"es2015\"]}!./src/Data.js\n **/","'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _immutable = require('immutable');\n\nvar I = _interopRequireWildcard(_immutable);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Reactor = (function () {\n    function Reactor() {\n        _classCallCheck(this, Reactor);\n\n        this.reactors = I.Set();\n        this.structure = undefined; //yet declared\n    }\n\n    _createClass(Reactor, [{\n        key: 'subscribe',\n        value: function subscribe(reaction) {\n            var _this = this;\n\n            this.reactors = this.reactors.add(reaction);\n            reaction(this.structure);\n            return function () {\n                _this.reactors = _this.reactors.delete(reaction);\n            };\n        }\n    }, {\n        key: 'process',\n        value: function process() {\n            throw new Error('abstract');\n        }\n    }, {\n        key: 'digest',\n        value: function digest(data) {\n            var newValue = this.process(data);\n            if (newValue !== this.structure) {\n                this.structure = newValue;\n                this.flush();\n            }\n        }\n    }, {\n        key: 'flush',\n        value: function flush() {\n            var _this2 = this;\n\n            this.reactors.forEach(function (reactor) {\n                return reactor(_this2.structure);\n            });\n        }\n    }, {\n        key: 'destroy',\n        value: function destroy() {\n            throw new Error('abstract');\n        }\n    }, {\n        key: 'isReactor',\n        get: function get() {\n            return true;\n        }\n    }]);\n\n    return Reactor;\n})();\n\nexports.default = Reactor;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader?{\"presets\":[\"es2015\"]}!./src/Reactor.js\n **/","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.immutableReadWrapper = exports.immutableWriteWrapper = undefined;\n\nvar _Queue = require('./Queue');\n\nvar _Queue2 = _interopRequireDefault(_Queue);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * adds read methods to `that`\n * that enable reading from its structure\n *\n * @param  {Reactor} decorator subject\n * @return {void}\n */\nfunction immutableReadWrapper(that) {\n    ['equals', 'hashCode', 'get', 'has', 'includes', 'first', 'last', 'getIn', 'hasIn', 'toJS', 'toObject', 'toArray', 'toMap', 'toOrderedMap', 'toSet', 'toOrderedSet', 'toList', 'toStack', 'toSeq', 'toKeyedSeq', 'toIndexedSeq', 'toSetSeq', 'keys', 'values', 'entries', 'keySeq', 'valueSeq', 'entrySeq', 'map', 'filter', 'filterNot', 'reverse', 'sort', 'sortBy', 'groupBy', 'forEach', 'slice', 'rest', 'butLast', 'skip', 'skipLast', 'skipWhile', 'skipUntil', 'take', 'takeLast', 'takeWhile', 'takeUntil', 'concat', 'flatten', 'flatMap', 'reduce', 'reduceRight', 'every', 'some', 'join', 'isEmpty', 'count', 'countBy', 'find', 'findLast', 'findEntry', 'findLastEntry', 'max', 'maxBy', 'min', 'minBy', 'isSubset', 'isSuperset'].forEach(function (prop) {\n        that[prop] = function () {\n            for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n                args[_key] = arguments[_key];\n            }\n\n            return that.structure[prop].apply(that.structure, args);\n        };\n    });\n}\n\n/**\n * adds write methods of Iterable interface to Reactor\n * so they can trigger Reactor digesting of new value\n *\n * @param  {Reactor} decorator subject\n * @return {void}\n */\nfunction immutableWriteWrapper(that) {\n    ['set', 'delete', 'update', 'merge', 'mergeDeep', 'setIn', 'deleteIn', 'updateIn', 'mergeIn', 'mergeDeepIn'].forEach(function (prop) {\n        that[prop] = _Queue2.default.createAction(function () {\n            for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n                args[_key2] = arguments[_key2];\n            }\n\n            that.digest(that.structure[prop].apply(that.structure, args));\n        });\n    });\n}\n\nexports.immutableWriteWrapper = immutableWriteWrapper;\nexports.immutableReadWrapper = immutableReadWrapper;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader?{\"presets\":[\"es2015\"]}!./src/ImmutableWrapper.js\n **/","'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _immutable = require('immutable');\n\nvar I = _interopRequireWildcard(_immutable);\n\nvar _Reactor2 = require('./Reactor.js');\n\nvar _Reactor3 = _interopRequireDefault(_Reactor2);\n\nvar _ImmutableWrapper = require('./ImmutableWrapper.js');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _typeof(obj) { return obj && typeof Symbol !== \"undefined\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar View = (function (_Reactor) {\n    _inherits(View, _Reactor);\n\n    function View(source, process) {\n        _classCallCheck(this, View);\n\n        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(View).call(this));\n\n        if (process) {\n            _this.process = process;\n        }\n\n        (0, _ImmutableWrapper.immutableReadWrapper)(_this);\n\n        if (source && (typeof source === 'undefined' ? 'undefined' : _typeof(source)) === 'object') {\n            if (source.isReactor || source.isDomain) {\n                _this.connectToView(source);\n            } else {\n                _this.connectToViews(source);\n            }\n        }\n        return _this;\n    }\n\n    /**\n     * @private\n     * @param {Reactor} masterView\n     */\n\n    _createClass(View, [{\n        key: 'connectToView',\n        value: function connectToView(masterView) {\n            this.unsubs = [masterView.subscribe(this.digest.bind(this))];\n        }\n\n        /**\n         * @private\n         * @param {Object.<Reactor>} views\n         */\n\n    }, {\n        key: 'connectToViews',\n        value: function connectToViews(views) {\n            var _this2 = this;\n\n            this.prestructure = I.Map();\n            this.unsubs = Object.keys(views).map(function (viewName) {\n                var sub = function sub(data) {\n                    _this2.digest(_this2.prestructure = _this2.prestructure.set(viewName, data));\n                };\n\n                return views[viewName].subscribe(sub);\n            });\n        }\n    }, {\n        key: 'process',\n\n        /**\n         * @private\n         * @param {*} data\n         * @returns {*}\n         */\n        value: function process(data) {\n            return data;\n        }\n    }, {\n        key: 'destroy',\n        value: function destroy() {\n            this.unsubs.forEach(function (func) {\n                return func();\n            });\n            this.unsubs = null;\n            this.structure = null;\n            this.prestructure = null;\n            this.reactors = null;\n        }\n    }, {\n        key: 'isView',\n        get: function get() {\n            return true;\n        }\n    }]);\n\n    return View;\n})(_Reactor3.default);\n\nexports.default = View;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader?{\"presets\":[\"es2015\"]}!./src/View.js\n **/"],"sourceRoot":""}