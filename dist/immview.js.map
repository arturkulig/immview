{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 4727e6c71de9c4ddf964","webpack:///./src/index.js","webpack:///./src/Domain.js","webpack:///./src/Queue.js","webpack:///external \"immutable\"","webpack:///./src/Data.js","webpack:///./src/View.js","webpack:///./src/Reactor.js"],"names":["_interopRequireDefault","obj","__esModule","default","Object","defineProperty","exports","value","Domain","View","Data","undefined","_Domain","require","_Domain2","_Data","_Data2","_View","_View2","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","_Queue","_Queue2","noop","view","actions","this","data","_actionNames","_claimView","_claimActions","isReactor","Error","isData","_this","keys","forEach","actionName","createAction","read","nextProcessor","map","reaction","subscribe","_this2","destroy","rejectContext","get","structure","_interopRequireWildcard","newObj","hasOwnProperty","call","action","context","_len","arguments","args","Array","_key","appendAndRunQueue","appendToQueue","queue","add","run","shiftFromQueue","toRun","first","rest","filter","item","isRunning","count","runFirst","e","console","error","message","apply","_immutable","I","OrderedSet","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","_Reactor2","_Reactor3","_Reactor","initialData","getPrototypeOf","Iterable","isIterable","digest","fromJS","change","_typeof","Symbol","pass","source","process","isDomain","connectToView","connectToViews","unsubs","views","_this3","mergedStructure","Map","viewsNames","viewName","viewData","set","digestMerged","appendReactor","func","hasValue","v","emptySet","Set","Reactor","reactors","is","flush","reactor","destroyReactor"],"mappings":"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","file":"immview.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"immutable\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"immutable\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"immview\"] = factory(require(\"immutable\"));\n\telse\n\t\troot[\"immview\"] = factory(root[\"immutable\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 4727e6c71de9c4ddf964\n **/","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Domain = exports.View = exports.Data = undefined;\n\nvar _Domain = require('./Domain.js');\n\nvar _Domain2 = _interopRequireDefault(_Domain);\n\nvar _Data = require('./Data.js');\n\nvar _Data2 = _interopRequireDefault(_Data);\n\nvar _View = require('./View.js');\n\nvar _View2 = _interopRequireDefault(_View);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.Data = _Data2.default;\nexports.View = _View2.default;\nexports.Domain = _Domain2.default;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader?{\"presets\":[\"es2015\"]}!./src/index.js\n **/","'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _Queue = require('./Queue.js');\n\nvar _Queue2 = _interopRequireDefault(_Queue);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar noop = function noop() {};\n\nvar Domain = (function () {\n    /**\n     * Create a domain holding a view\n     * @param {Reactor} view\n     */\n\n    function Domain(view, actions) {\n        _classCallCheck(this, Domain);\n\n        /**\n         * @private\n         * @type {View} */\n        this.view = null;\n        /**\n         * @private\n         * @type {Data} */\n        this.data = null;\n        /**\n         * @private\n         * @type {String[]} */\n        this._actionNames = null;\n\n        this._claimView(view);\n        this._claimActions(actions);\n    }\n\n    _createClass(Domain, [{\n        key: '_claimView',\n        value: function _claimView(view) {\n            if (view.isReactor) {\n                this.view = view;\n\n                if (view.isData) {\n                    this.data = view;\n                }\n            } else {\n                throw new Error('view is not inheriting Reactor type');\n            }\n        }\n    }, {\n        key: '_claimActions',\n        value: function _claimActions(actions) {\n            var _this = this;\n\n            this._actionNames = actions ? Object.keys(actions) : [];\n\n            this._actionNames.forEach(function (actionName) {\n                if (_this[actionName]) {\n                    throw new Error('\"' + actionName + '\" is reserved for Domain interface');\n                }\n\n                _this[actionName] = _Queue2.default.createAction(actions[actionName], _this);\n            });\n        }\n    }, {\n        key: 'read',\n        value: function read() {\n            return this.view.read();\n        }\n    }, {\n        key: 'map',\n        value: function map(nextProcessor) {\n            return this.view.map(nextProcessor);\n        }\n\n        // no write method now and in the future\n        // as it would encourage developers\n        // to modify domain data\n        // outside of the domain scope\n\n    }, {\n        key: 'subscribe',\n        value: function subscribe(reaction) {\n            return this.view.subscribe(reaction);\n        }\n    }, {\n        key: 'destroy',\n        value: function destroy() {\n            var _this2 = this;\n\n            // destroy and unmount a structure\n            this.view.destroy();\n            this.view = null;\n            this.data = null;\n\n            // remove all queued actions\n            _Queue2.default.rejectContext(this);\n\n            // unmount all domain methods\n            this._actionNames.forEach(function (actionName) {\n                _this2[actionName] = noop;\n            });\n            this._actionNames = null;\n        }\n    }, {\n        key: 'structure',\n        get: function get() {\n            return this.view && this.view.structure;\n        }\n    }, {\n        key: 'isDomain',\n        get: function get() {\n            return true;\n        }\n    }]);\n\n    return Domain;\n})();\n\nexports.default = Domain;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader?{\"presets\":[\"es2015\"]}!./src/Domain.js\n **/","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _immutable = require('immutable');\n\nvar I = _interopRequireWildcard(_immutable);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar isRunning = false;\nvar queue = I.OrderedSet();\n\n/**\n * Returns a function that is queueable version of provided one.\n * @param {Function} action\n * @param {*} [context]\n * @returns {Function}\n */\nfunction createAction(action, context) {\n    return function () {\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        appendAndRunQueue(action, context, args);\n    };\n}\n\n/**\n * Append new action onto end of the queue\n * @param {Function} action\n * @param {*} context\n * @param {Array.<*>} args\n */\nfunction appendToQueue(action, context, args) {\n    queue = queue.add({\n        action: action,\n        context: context,\n        args: args\n    });\n}\n\nfunction appendAndRunQueue(action, context, args) {\n    appendToQueue(action, context, args);\n    run();\n}\n\n/**\n * Removes and returns first action from the queue and\n * @returns {{action:Function,context,args:Array.<*>}}\n */\nfunction shiftFromQueue() {\n    var toRun = queue.first();\n    queue = queue.rest();\n    return toRun;\n}\n\n/**\n * Removes all queued actions tied with a context\n * @param context\n */\nfunction rejectContext(context) {\n    queue = queue.filter(function (item) {\n        return item.context !== context;\n    });\n}\n\n/**\n * Starts executing the queue\n */\nfunction run() {\n    if (isRunning) {\n        return;\n    }\n\n    isRunning = true;\n\n    while (queue.count() > 0) {\n        try {\n            runFirst();\n        } catch (e) {\n            console.error('Immview.Queue run - Error occured while running running a function');\n            console.error(e.message);\n        }\n    }\n\n    isRunning = false;\n}\n\n/**\n * Execute first action of current queue\n */\nfunction runFirst() {\n    var toRun = shiftFromQueue();\n    var context = toRun.context;\n    var action = toRun.action;\n    var args = toRun.args;\n\n    action.apply(context, args);\n}\n\nexports.default = {\n    createAction: createAction,\n    rejectContext: rejectContext,\n    appendAndRunQueue: appendAndRunQueue\n};\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader?{\"presets\":[\"es2015\"]}!./src/Queue.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"immutable\"\n ** module id = 3\n ** module chunks = 0\n **/","'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _immutable = require('immutable');\n\nvar I = _interopRequireWildcard(_immutable);\n\nvar _Queue = require('./Queue');\n\nvar _Queue2 = _interopRequireDefault(_Queue);\n\nvar _View = require('./View.js');\n\nvar _View2 = _interopRequireDefault(_View);\n\nvar _Reactor2 = require('./Reactor.js');\n\nvar _Reactor3 = _interopRequireDefault(_Reactor2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Data = (function (_Reactor) {\n    _inherits(Data, _Reactor);\n\n    function Data(initialData) {\n        _classCallCheck(this, Data);\n\n        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Data).call(this));\n\n        if (I.Iterable.isIterable(initialData)) {\n            _this.digest(initialData);\n        } else {\n            _this.digest(I.fromJS(initialData));\n        }\n        return _this;\n    }\n\n    _createClass(Data, [{\n        key: 'write',\n        value: function write(change) {\n            if (typeof change === 'function') {\n                _Queue2.default.appendAndRunQueue(function updateStructure() {\n                    this.digest(change.apply(this, [this.read()]));\n                }, this, [change]);\n            } else {\n                _Queue2.default.appendAndRunQueue(this.digest, this, [change]);\n            }\n        }\n    }, {\n        key: 'map',\n        value: function map(nextProcessor) {\n            return new _View2.default(this, nextProcessor);\n        }\n    }, {\n        key: 'isData',\n        get: function get() {\n            return true;\n        }\n    }]);\n\n    return Data;\n})(_Reactor3.default);\n\nexports.default = Data;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader?{\"presets\":[\"es2015\"]}!./src/Data.js\n **/","'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _immutable = require('immutable');\n\nvar I = _interopRequireWildcard(_immutable);\n\nvar _Reactor2 = require('./Reactor.js');\n\nvar _Reactor3 = _interopRequireDefault(_Reactor2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _typeof(obj) { return obj && typeof Symbol !== \"undefined\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar pass = function pass(data) {\n    return data;\n};\n\nvar View = (function (_Reactor) {\n    _inherits(View, _Reactor);\n\n    function View(source) {\n        var process = arguments.length <= 1 || arguments[1] === undefined ? pass : arguments[1];\n\n        _classCallCheck(this, View);\n\n        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(View).call(this));\n\n        if (source && (typeof source === 'undefined' ? 'undefined' : _typeof(source)) === 'object') {\n            if (source.isReactor || source.isDomain) {\n                _this.connectToView(source, process);\n            } else {\n                _this.connectToViews(source, process);\n            }\n        }\n        return _this;\n    }\n\n    /**\n     * @private\n     * @param {Reactor} view\n     */\n\n    _createClass(View, [{\n        key: 'connectToView',\n        value: function connectToView(view, process) {\n            var _this2 = this;\n\n            this.unsubs = [view.subscribe(function (data) {\n                return _this2.digest(process(data));\n            })];\n        }\n\n        /**\n         * @private\n         * @param {Object.<Reactor>} views\n         */\n\n    }, {\n        key: 'connectToViews',\n        value: function connectToViews(views, process) {\n            var _this3 = this;\n\n            // initialize as a map{string:Iterable}\n            var mergedStructure = I.Map();\n\n            var viewsNames = Object.keys(views);\n\n            //prefill mergedStructure before launching subscriptions\n            viewsNames.forEach(function (viewName) {\n                var viewData = views[viewName].read();\n                if (viewData) {\n                    mergedStructure = mergedStructure.set(viewName, viewData);\n                }\n            });\n\n            var digestMerged = function digestMerged() {\n                return _this3.digest(process(mergedStructure));\n            };\n\n            //subscribe to all data changes in parent views\n            this.unsubs = viewsNames.map(function (viewName) {\n                return views[viewName].appendReactor(function (data) {\n                    mergedStructure = mergedStructure.set(viewName, data);\n                    digestMerged();\n                });\n            });\n\n            digestMerged();\n        }\n    }, {\n        key: 'destroy',\n        value: function destroy() {\n            _Reactor3.default.prototype.destroy.call(this);\n\n            if (this.unsubs) {\n                this.unsubs.forEach(function (func) {\n                    return func();\n                });\n            }\n\n            this.unsubs = null;\n        }\n\n        /**\n         * Creates a View by digesting current View data\n         * @param {Function} nextProcessor\n         */\n\n    }, {\n        key: 'map',\n        value: function map(nextProcessor) {\n            return new View(this, nextProcessor);\n        }\n    }, {\n        key: 'isView',\n        get: function get() {\n            return true;\n        }\n    }]);\n\n    return View;\n})(_Reactor3.default);\n\nexports.default = View;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader?{\"presets\":[\"es2015\"]}!./src/View.js\n **/","'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _immutable = require('immutable');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction hasValue(v) {\n    return v !== undefined && v !== null;\n}\n\nvar emptySet = (0, _immutable.Set)();\n\nvar Reactor = (function () {\n    function Reactor() {\n        _classCallCheck(this, Reactor);\n\n        /**\n         * @private\n         */\n        this.reactors = emptySet;\n        /**\n         * @private\n         * @type {Iterable}\n         */\n        this.structure = undefined; //yet declared\n    }\n\n    _createClass(Reactor, [{\n        key: 'appendReactor',\n\n        /**\n         * @param {function} reaction\n         * @returns {function()}\n         */\n        value: function appendReactor(reaction) {\n            var _this = this;\n\n            this.reactors = this.reactors.add(reaction);\n            return function () {\n                _this.reactors = _this.reactors.delete(reaction);\n            };\n        }\n\n        /**\n         * @param {function} reaction\n         * @returns {function()}\n         */\n\n    }, {\n        key: 'subscribe',\n        value: function subscribe(reaction) {\n            reaction(this.structure);\n            return this.appendReactor(reaction);\n        }\n    }, {\n        key: 'digest',\n        value: function digest(data) {\n            if (hasValue(data) && (!hasValue(this.structure) || (0, _immutable.is)(data, this.structure) === false)) {\n                this.structure = data;\n                this.flush();\n            }\n        }\n    }, {\n        key: 'flush',\n        value: function flush() {\n            var _this2 = this;\n\n            this.reactors.forEach(function (reactor) {\n                return reactor(_this2.structure);\n            });\n        }\n    }, {\n        key: 'destroyReactor',\n        value: function destroyReactor() {\n            this.structure = null;\n            this.reactors = emptySet;\n        }\n    }, {\n        key: 'destroy',\n        value: function destroy() {\n            this.destroyReactor();\n        }\n    }, {\n        key: 'read',\n        value: function read() {\n            return this.structure;\n        }\n    }, {\n        key: 'isReactor',\n        get: function get() {\n            return true;\n        }\n    }]);\n\n    return Reactor;\n})();\n\nexports.default = Reactor;\n\n\n/** WEBPACK FOOTER **\n ** ./~/babel-loader?{\"presets\":[\"es2015\"]}!./src/Reactor.js\n **/"],"sourceRoot":""}