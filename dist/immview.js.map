{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///immview.js","webpack:///webpack/bootstrap ffe445e25951fa750832","webpack:///./src/index.js","webpack:///./src/Domain.js","webpack:///./src/Dispatcher.js","webpack:///./src/Data.js","webpack:///external \"immutable\"","webpack:///./src/Reactor.js","webpack:///./src/streamScheduler.js","webpack:///./src/graphSort.js","webpack:///./src/View.js","webpack:///./src/Debounce.js","webpack:///./src/Throttle.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_4__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","dispatch","Dispatcher","Throttle","Debounce","Domain","View","Data","undefined","_Domain","_Domain2","_Data","_Data2","_View","_View2","_Debounce","_Debounce2","_Throttle","_Throttle2","_Dispatcher","_Dispatcher2","stream","actions","subscribe","Error","errorPrefix","_claimActions","noop","prototype","_this","_actionNames","keys","forEach","actionName","_len","arguments","length","args","Array","_key","dispatchDomainAction","read","map","nextProcessor","debounce","timeout","throttle","reaction","appendReactor","destroy","_this2","rejectContext","_typeof","Symbol","constructor","findMaxPriority","maxPriority","firstOfPriority","i","queue","jobPriority","priority","shiftFromQueue","toRun","splice","indexOf","appendToQueue","action","context","PRIORITY_EXT","push","startQueue","isRunning","tick","runFirstQueuedItem","e","logError","logger","error","stack","name","message","PRIORITY_DOMAIN","dispatchDataWrite","PRIORITY_DATA_WRITE","dispatchDataConsume","PRIORITY_DATA_CONSUMING","dispatchExternal","filter","item","task","apply","func","console","initialData","_Reactor2","linkTo","digest","_immutable","fromJS","_extends","assign","target","source","key","hasOwnProperty","_Reactor","write","change","consume","hasValue","v","shouldStructureBeReplaced","structure","candidate","is","restoreNodeJobs","edges","currentSchedule","digestJobMap","_streamScheduler","createSchedule","copyQueueOntoSchedule","doNextJob","scheduleLength","digestQueue","runScheduledPriorityJob","identity","Reactor","reactors","Set","digestLinks","sourceNode","unlink","link","data","chew","scheduleJob","flush","_this3","add","delete","_this4","processor","graph","sortStreamGraph","reduce","jobMap","node","unshift","contextNode","nodeNewJob","schedule","newSchedule","entry","currentNode","findJob","result","concat","sourceEntry","sourceEntryNode","sourceEntryJob","j","targetEntry","targetEntryNode","currentJob","restOfJobs","job","_graphSort","getOrder","getGraphNodes","edge","visited","visit","tmpVisited","tmpStack","getNodeChildren","childNode","process","connectToSource","connectToMultipleSources","unsubs","sources","mergedStructure","Map","sourcesNames","sourceName","sourceData","set","timeoutID","subscription","clearTimeout","setTimeout","timeoutedData"],"mappings":"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","file":"immview.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"immutable\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"immutable\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"immview\"] = factory(require(\"immutable\"));\n\telse\n\t\troot[\"immview\"] = factory(root[\"immutable\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_4__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"immutable\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"immutable\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"immview\"] = factory(require(\"immutable\"));\n\telse\n\t\troot[\"immview\"] = factory(root[\"immutable\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_4__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.dispatch = exports.Dispatcher = exports.Throttle = exports.Debounce = exports.Domain = exports.View = exports.Data = undefined;\n\t\n\tvar _Domain = __webpack_require__(1);\n\t\n\tvar _Domain2 = _interopRequireDefault(_Domain);\n\t\n\tvar _Data = __webpack_require__(3);\n\t\n\tvar _Data2 = _interopRequireDefault(_Data);\n\t\n\tvar _View = __webpack_require__(8);\n\t\n\tvar _View2 = _interopRequireDefault(_View);\n\t\n\tvar _Debounce = __webpack_require__(9);\n\t\n\tvar _Debounce2 = _interopRequireDefault(_Debounce);\n\t\n\tvar _Throttle = __webpack_require__(10);\n\t\n\tvar _Throttle2 = _interopRequireDefault(_Throttle);\n\t\n\tvar _Dispatcher = __webpack_require__(2);\n\t\n\tvar _Dispatcher2 = _interopRequireDefault(_Dispatcher);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar dispatch = _Dispatcher2.default.dispatch;\n\texports.Data = _Data2.default;\n\texports.View = _View2.default;\n\texports.Domain = _Domain2.default;\n\texports.Debounce = _Debounce2.default;\n\texports.Throttle = _Throttle2.default;\n\texports.Dispatcher = _Dispatcher2.default;\n\texports.dispatch = dispatch;\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = Domain;\n\t\n\tvar _Dispatcher = __webpack_require__(2);\n\t\n\tvar noop = function noop() {\n\t    return null;\n\t};\n\t\n\tvar errorPrefix = 'Immview::Domain: ';\n\t\n\t/**\n\t * Create a domain holding a view\n\t * @param {Reactor} stream\n\t * @optional\n\t * @param {Object.<function>} actions\n\t */\n\tfunction Domain(stream, actions) {\n\t    if (stream.subscribe) {\n\t        this.stream = stream;\n\t    } else {\n\t        throw new Error(errorPrefix + ' stream source required');\n\t    }\n\t    this._claimActions(actions);\n\t}\n\t\n\tDomain.prototype = {\n\t    /**\n\t     * @private\n\t     */\n\t\n\t    _claimActions: function _claimActions(actions) {\n\t        var _this = this;\n\t\n\t        /**\n\t         * @private\n\t         */\n\t        this._actionNames = actions ? Object.keys(actions) : [];\n\t\n\t        this._actionNames.forEach(function (actionName) {\n\t            if (_this[actionName]) {\n\t                throw new Error('' + errorPrefix + actionName + ' is reserved for Domain interface');\n\t            }\n\t\n\t            if (typeof actions[actionName] !== 'function') {\n\t                throw new Error('' + errorPrefix + actionName + ' action is not a function');\n\t            }\n\t\n\t            _this[actionName] = function () {\n\t                for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t                    args[_key] = arguments[_key];\n\t                }\n\t\n\t                (0, _Dispatcher.dispatchDomainAction)(actions[actionName], _this, args, 1);\n\t            };\n\t        });\n\t    },\n\t\n\t    /**\n\t     * Retrieve last value on stream attached to the Domain\n\t     * @returns {Iterable}\n\t     */\n\t    read: function read() {\n\t        return this.stream.read();\n\t    },\n\t\n\t    // WRITE ?\n\t    // no write method now and in the future\n\t    // as it would encourage developers\n\t    // to modify domain data\n\t    // outside of the domain scope\n\t\n\t    /**\n\t     * Create a new stream from a stream attached to the Domain\n\t     * @param {function(Iterable)} nextProcessor\n\t     * @returns {View}\n\t     */\n\t    map: function map(nextProcessor) {\n\t        return this.stream.map(nextProcessor);\n\t    },\n\t\n\t    /**\n\t     * Create a new stream that will not trigger its subscriptions\n\t     * until given amount of miliseconds will pass from last call\n\t     * @param {number} timeout\n\t     * @returns {Debounce}\n\t     */\n\t    debounce: function debounce(timeout) {\n\t        return this.stream.debounce(timeout);\n\t    },\n\t\n\t    /**\n\t     * Create a new stream\n\t     * that will not trigger its subscriptions immediately,\n\t     * but defers updates for a number of miliseconds\n\t     * provided with timeout argument\n\t     * after first call\n\t     * @param {number} timeout\n\t     * @returns {Throttle}\n\t     */\n\t    throttle: function throttle(timeout) {\n\t        return this.stream.throttle(timeout);\n\t    },\n\t\n\t    /**\n\t     * Register a listener to changes on data stream.\n\t     * Calls provided method upon registration.\n\t     * @param reaction\n\t     * @returns {function()} unsubscribe\n\t     */\n\t    subscribe: function subscribe(reaction) {\n\t        return this.stream.subscribe(reaction);\n\t    },\n\t\n\t    /**\n\t     * Register a listener to changes on data stream.\n\t     * @param reaction\n\t     * @returns {function()} unsubscribe\n\t     */\n\t    appendReactor: function appendReactor(reaction) {\n\t        return this.stream.appendReactor(reaction);\n\t    },\n\t\n\t    /**\n\t     * Remove all subscriptions caused by the domain.\n\t     * Destroy stream attached to it.\n\t     * Cancel all currently dispatched actions.\n\t     */\n\t    destroy: function destroy() {\n\t        var _this2 = this;\n\t\n\t        // destroy and unmount a structure\n\t        this.stream.destroy();\n\t        this.stream = null;\n\t\n\t        // remove all queued actions\n\t        (0, _Dispatcher.rejectContext)(this);\n\t\n\t        // unmount all domain methods\n\t        this._actionNames.forEach(function (actionName) {\n\t            _this2[actionName] = noop;\n\t        });\n\t        this._actionNames = null;\n\t    }\n\t};\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.dispatch = dispatch;\n\texports.dispatchDomainAction = dispatchDomainAction;\n\texports.dispatchDataWrite = dispatchDataWrite;\n\texports.dispatchDataConsume = dispatchDataConsume;\n\texports.dispatchExternal = dispatchExternal;\n\texports.rejectContext = rejectContext;\n\t\n\tfunction _typeof(obj) { return obj && typeof Symbol !== \"undefined\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; }\n\t\n\tvar isRunning = false;\n\tvar queue = [];\n\tvar errorPrefix = 'Immview::Dispatcher: ';\n\t\n\tvar PRIORITY_EXT = 0;\n\tvar PRIORITY_DOMAIN = 1;\n\tvar PRIORITY_DATA_WRITE = 2;\n\tvar PRIORITY_DATA_CONSUMING = 3;\n\t\n\tfunction findMaxPriority() {\n\t    var maxPriority = -1;\n\t    var firstOfPriority = null;\n\t    for (var i = 0; i < queue.length; i++) {\n\t        var jobPriority = queue[i].priority;\n\t        if (jobPriority > maxPriority) {\n\t            firstOfPriority = queue[i];\n\t            maxPriority = jobPriority;\n\t        }\n\t    }\n\t    return firstOfPriority;\n\t}\n\t\n\tfunction shiftFromQueue() {\n\t    var toRun = findMaxPriority();\n\t    queue.splice(queue.indexOf(toRun), 1);\n\t    return toRun;\n\t};\n\t\n\t/**\n\t * Execute first action of current queue\n\t */\n\tvar runFirstQueuedItem = function runFirstQueuedItem() {\n\t    var task = shiftFromQueue();\n\t    if (task) {\n\t        var context = task.context;\n\t        var action = task.action;\n\t        var args = task.args;\n\t\n\t        action && action.apply(context, args);\n\t    }\n\t};\n\t\n\t/**\n\t * Append new action onto end of the queue\n\t * @param {Function} action\n\t * @param {*} context\n\t * @param {Array.<*>} args\n\t * @param {number} priority (higher number - sooner execution)\n\t */\n\tfunction appendToQueue(action) {\n\t    var context = arguments.length <= 1 || arguments[1] === undefined ? null : arguments[1];\n\t    var args = arguments.length <= 2 || arguments[2] === undefined ? [] : arguments[2];\n\t    var priority = arguments.length <= 3 || arguments[3] === undefined ? PRIORITY_EXT : arguments[3];\n\t\n\t    queue.push({\n\t        priority: priority,\n\t        action: action,\n\t        context: context,\n\t        args: args\n\t    });\n\t}\n\t\n\t/**\n\t * Starts executing the queue\n\t */\n\tfunction startQueue() {\n\t    if (isRunning) {\n\t        return;\n\t    }\n\t\n\t    if (queue.length > 0) {\n\t        isRunning = true;\n\t        Dispatcher.tick(function () {\n\t            try {\n\t                runFirstQueuedItem();\n\t            } catch (e) {\n\t                logError(e);\n\t            }\n\t            isRunning = false;\n\t            startQueue();\n\t        });\n\t    }\n\t}\n\t\n\tfunction logError(e) {\n\t    Dispatcher.logger.error(errorPrefix + 'Error occured while running a function');\n\t    if ((typeof e === 'undefined' ? 'undefined' : _typeof(e)) === 'object') {\n\t        if (e.stack) {\n\t            Dispatcher.logger.error(e.stack);\n\t        } else {\n\t            Dispatcher.logger.error(e.name, e.message);\n\t        }\n\t    } else {\n\t        Dispatcher.logger.error(e);\n\t    }\n\t}\n\t\n\tfunction dispatch(action, context, args, priority) {\n\t    appendToQueue(action, context, args, priority);\n\t    startQueue();\n\t}\n\t\n\tfunction dispatchDomainAction(action, context, args) {\n\t    dispatch(action, context, args, PRIORITY_DOMAIN);\n\t}\n\t\n\tfunction dispatchDataWrite(action, context, args) {\n\t    dispatch(action, context, args, PRIORITY_DATA_WRITE);\n\t}\n\t\n\tfunction dispatchDataConsume(action, context, args) {\n\t    dispatch(action, context, args, PRIORITY_DATA_CONSUMING);\n\t}\n\t\n\tfunction dispatchExternal(action, context, args) {\n\t    dispatch(action, context, args, PRIORITY_EXT);\n\t}\n\t\n\t/**\n\t * Removes all queued actions tied with a context\n\t * @param context\n\t */\n\tfunction rejectContext(context) {\n\t    queue = queue.filter(function (item) {\n\t        return item.context !== context;\n\t    });\n\t}\n\t\n\tvar Dispatcher = exports.Dispatcher = {\n\t\n\t    /**\n\t     * Place provided function on a queue and run it as soon as possible\n\t     * @param {function} action\n\t     * @param {*} [context]\n\t     * @param {Array.<*>} [args]\n\t     * @param {number} [priority=0] priority for dispatched action. 0, 1, 2 are acceptable\n\t     */\n\t    dispatch: dispatchExternal,\n\t\n\t    tick: function tick(func) {\n\t        func();\n\t    },\n\t\n\t    rejectContext: rejectContext,\n\t\n\t    logger: console\n\t};\n\t\n\texports.default = Dispatcher;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = Data;\n\t\n\tvar _immutable = __webpack_require__(4);\n\t\n\tvar _Dispatcher = __webpack_require__(2);\n\t\n\tvar _Reactor = __webpack_require__(5);\n\t\n\tvar _Reactor2 = _interopRequireDefault(_Reactor);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction Data(initialData) {\n\t    _Reactor2.default.call(this);\n\t\n\t    this.linkTo(null);\n\t    this.digest((0, _immutable.fromJS)(initialData));\n\t}\n\t\n\tData.prototype = _extends({}, _Reactor2.default.prototype, {\n\t    /**\n\t     * Dispatch a change instruction to the Data\n\t     * @param {Iterable|function(data: Iterable):Iterable} change\n\t     */\n\t\n\t    write: function write(change) {\n\t        var _this = this;\n\t\n\t        (0, _Dispatcher.dispatchDataWrite)(function () {\n\t            if (typeof change === 'function') {\n\t                _this.consume(_this.read(), change);\n\t            } else {\n\t                _this.consume(change);\n\t            }\n\t        });\n\t    }\n\t});\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = Reactor;\n\t\n\tvar _immutable = __webpack_require__(4);\n\t\n\tvar _streamScheduler = __webpack_require__(6);\n\t\n\tvar _Dispatcher = __webpack_require__(2);\n\t\n\tfunction hasValue(v) {\n\t    return v !== undefined && v !== null;\n\t}\n\t\n\tfunction shouldStructureBeReplaced(structure, candidate) {\n\t    return hasValue(candidate) && (!hasValue(structure) || !(0, _immutable.is)(candidate, structure));\n\t};\n\t\n\tvar digestLinks = [];\n\tvar digestQueue = [];\n\t\n\tfunction restoreNodeJobs(edges, currentSchedule) {\n\t    var digestJobMap = (0, _streamScheduler.createSchedule)(edges);\n\t    return (0, _streamScheduler.copyQueueOntoSchedule)(currentSchedule, digestJobMap);\n\t}\n\t\n\tfunction doNextJob() {\n\t    if ((0, _streamScheduler.scheduleLength)(digestQueue) > 0) {\n\t        digestQueue = (0, _streamScheduler.runScheduledPriorityJob)(digestQueue);\n\t        (0, _Dispatcher.dispatchDataWrite)(doNextJob);\n\t    }\n\t}\n\t\n\tfunction identity(v) {\n\t    return v;\n\t}\n\t\n\tfunction Reactor() {\n\t    /**\n\t     * @private\n\t     */\n\t    this.reactors = (0, _immutable.Set)();\n\t}\n\t\n\tReactor.prototype = {\n\t    read: function read() {\n\t        return this.structure;\n\t    },\n\t    linkTo: function linkTo(sourceNode) {\n\t        digestLinks.push([sourceNode && (sourceNode.stream ? sourceNode.stream : sourceNode), this]);\n\t        digestQueue = restoreNodeJobs(digestLinks, digestQueue);\n\t    },\n\t    unlink: function unlink() {\n\t        var _this = this;\n\t\n\t        digestLinks = digestLinks.filter(function (link) {\n\t            return link[0] !== _this && link[1] !== _this;\n\t        });\n\t        digestQueue = restoreNodeJobs(digestLinks, digestQueue);\n\t    },\n\t    consume: function consume(data) {\n\t        var _this2 = this;\n\t\n\t        var chew = arguments.length <= 1 || arguments[1] === undefined ? identity : arguments[1];\n\t\n\t        (0, _Dispatcher.dispatchDataConsume)(function () {\n\t            digestQueue = (0, _streamScheduler.scheduleJob)(_this2, function () {\n\t                return _this2.digest(chew(data));\n\t            }, digestQueue);\n\t            (0, _Dispatcher.dispatchDataWrite)(doNextJob);\n\t        });\n\t    },\n\t    digest: function digest(data) {\n\t        if (shouldStructureBeReplaced(this.structure, data)) {\n\t            this.structure = data;\n\t            this.flush();\n\t        }\n\t    },\n\t\n\t    /**\n\t     * @param {function} reaction\n\t     * @returns {function()}\n\t     */\n\t    appendReactor: function appendReactor(reaction) {\n\t        var _this3 = this;\n\t\n\t        this.reactors = this.reactors.add(reaction);\n\t        return function () {\n\t            _this3.reactors = _this3.reactors.delete(reaction);\n\t        };\n\t    },\n\t\n\t    /**\n\t     * @param {function} reaction\n\t     * @returns {function()}\n\t     */\n\t    subscribe: function subscribe(reaction) {\n\t        reaction(this.read());\n\t        return this.appendReactor(reaction);\n\t    },\n\t    flush: function flush() {\n\t        var _this4 = this;\n\t\n\t        this.reactors.forEach(function (reaction) {\n\t            return reaction(_this4.read());\n\t        });\n\t    },\n\t    destroy: function destroy() {\n\t        this.unlink();\n\t        this.structure = null;\n\t        this.reactors = (0, _immutable.Set)();\n\t    },\n\t    map: function map(processor) {\n\t        var View = __webpack_require__(8).default;\n\t        return new View(this, processor);\n\t    },\n\t    debounce: function debounce(timeout) {\n\t        var Debounce = __webpack_require__(9).default;\n\t        return new Debounce(this, timeout);\n\t    },\n\t    throttle: function throttle(timeout) {\n\t        var Throttle = __webpack_require__(10).default;\n\t        return new Throttle(this, timeout);\n\t    }\n\t};\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.sortStreamGraph = undefined;\n\texports.createSchedule = createSchedule;\n\texports.scheduleJob = scheduleJob;\n\texports.scheduleLength = scheduleLength;\n\texports.findJob = findJob;\n\texports.copyQueueOntoSchedule = copyQueueOntoSchedule;\n\texports.runScheduledPriorityJob = runScheduledPriorityJob;\n\t\n\tvar _graphSort = __webpack_require__(7);\n\t\n\tvar sortStreamGraph = exports.sortStreamGraph = _graphSort.getOrder;\n\t\n\tfunction createSchedule(graph) {\n\t    return sortStreamGraph(graph).reduce(function (jobMap, node) {\n\t        jobMap.unshift([node, null]);\n\t        return jobMap;\n\t    }, []);\n\t}\n\t\n\tfunction scheduleJob(contextNode, nodeNewJob, schedule) {\n\t    var newSchedule = [];\n\t    for (var i = 0; i < schedule.length; i++) {\n\t        var entry = schedule[i];\n\t        var currentNode = entry[0];\n\t        if (currentNode === contextNode) {\n\t            newSchedule.push([currentNode, nodeNewJob]);\n\t        } else {\n\t            newSchedule.push(entry);\n\t        }\n\t    }\n\t    return newSchedule;\n\t}\n\t\n\tfunction scheduleLength(schedule) {\n\t    var length = 0;\n\t    for (var i = 0; i < schedule.length; i++) {\n\t        length += !!schedule[i][1] | 0;\n\t    }\n\t    return length;\n\t}\n\t\n\tfunction findJob(queue, contextNode) {\n\t    for (var i = 0; i < queue.length; i++) {\n\t        if (queue[i][0] === contextNode) {\n\t            return queue[i][1];\n\t        }\n\t    }\n\t    return null;\n\t}\n\t\n\tfunction copyQueueOntoSchedule(source, target) {\n\t    var result = [].concat(target);\n\t    for (var i = 0; i < source.length; i++) {\n\t        var sourceEntry = source[i];\n\t        var sourceEntryNode = sourceEntry[0];\n\t        var sourceEntryJob = sourceEntry[1];\n\t\n\t        if (sourceEntryJob) {\n\t            for (var j = 0; j < result.length; j++) {\n\t                var targetEntry = result[j];\n\t                var targetEntryNode = targetEntry[0];\n\t                if (targetEntryNode === sourceEntryNode) {\n\t                    result[j] = sourceEntry;\n\t                }\n\t            }\n\t        }\n\t    }\n\t    return result;\n\t}\n\t\n\tfunction runScheduledPriorityJob(schedule) {\n\t    var currentJob = null;\n\t    var restOfJobs = [].concat(schedule);\n\t    for (var i = 0; i < schedule.length; i++) {\n\t        var entry = schedule[i];\n\t        var node = entry[0];\n\t        var job = entry[1];\n\t        if (job && !currentJob) {\n\t            currentJob = job;\n\t            restOfJobs[i] = [node, null];\n\t        }\n\t    };\n\t    if (currentJob) {\n\t        currentJob();\n\t    }\n\t    return restOfJobs;\n\t}\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.getGraphNodes = getGraphNodes;\n\texports.getOrder = getOrder;\n\texports.visit = visit;\n\texports.getNodeChildren = getNodeChildren;\n\tfunction getGraphNodes(edges) {\n\t    return edges.reduce(function (result, edge) {\n\t        if (result.indexOf(edge[0]) < 0) {\n\t            result.push(edge[0]);\n\t        }\n\t        if (result.indexOf(edge[1]) < 0) {\n\t            result.push(edge[1]);\n\t        }\n\t        return result;\n\t    }, []);\n\t}\n\t\n\tfunction getOrder(edges) {\n\t    var visited = [];\n\t    var stack = [];\n\t    getGraphNodes(edges).forEach(function (node) {\n\t        if (!visited || visited.indexOf(node) < 0) {\n\t            var result = visit(edges, node, stack, visited);\n\t            visited = result.visited;\n\t            stack = result.stack;\n\t        }\n\t    });\n\t    return stack;\n\t}\n\t\n\tfunction visit(edges, node, stack, visited) {\n\t    var tmpVisited = visited.concat([node]);\n\t    var tmpStack = stack;\n\t    getNodeChildren(edges, node).forEach(function (childNode) {\n\t        if (!tmpVisited || tmpVisited.indexOf(childNode) < 0) {\n\t            var result = visit(edges, childNode, tmpStack, tmpVisited);\n\t            tmpVisited = result.visited;\n\t            tmpStack = result.stack;\n\t        }\n\t    });\n\t    return {\n\t        visited: tmpVisited,\n\t        stack: tmpStack.concat([node])\n\t    };\n\t}\n\t\n\tfunction getNodeChildren(edges, node) {\n\t    return edges.filter(function (edge) {\n\t        return edge[0] === node;\n\t    }).map(function (edge) {\n\t        return edge[1];\n\t    });\n\t}\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = View;\n\t\n\tvar _immutable = __webpack_require__(4);\n\t\n\tvar _Reactor = __webpack_require__(5);\n\t\n\tvar _Reactor2 = _interopRequireDefault(_Reactor);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _typeof(obj) { return obj && typeof Symbol !== \"undefined\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; }\n\t\n\tvar identity = function identity(data) {\n\t    return data;\n\t};\n\t\n\tfunction View(source) {\n\t    var process = arguments.length <= 1 || arguments[1] === undefined ? identity : arguments[1];\n\t\n\t    _Reactor2.default.call(this);\n\t\n\t    if (source && (typeof source === 'undefined' ? 'undefined' : _typeof(source)) === 'object') {\n\t        if (source.subscribe) {\n\t            this.connectToSource(source, process);\n\t        } else {\n\t            this.connectToMultipleSources(source, process);\n\t        }\n\t    }\n\t}\n\t\n\tView.prototype = _extends({}, _Reactor2.default.prototype, {\n\t\n\t    /**\n\t     * @private\n\t     * @param {Reactor} source\n\t     */\n\t\n\t    connectToSource: function connectToSource(source, process) {\n\t        var _this = this;\n\t\n\t        this.linkTo(source);\n\t        this.digest(process(source.read()));\n\t        this.unsubs = [source.appendReactor(function (data) {\n\t            return _this.digest(process(data));\n\t        })];\n\t    },\n\t\n\t    /**\n\t     * @private\n\t     * @param {Object.<Reactor>} sources\n\t     */\n\t    connectToMultipleSources: function connectToMultipleSources(sources, process) {\n\t        var _this2 = this;\n\t\n\t        // initialize as a map{string:Iterable}\n\t        var mergedStructure = (0, _immutable.Map)();\n\t\n\t        var sourcesNames = Object.keys(sources);\n\t\n\t        // prefill mergedStructure before launching subscriptions\n\t        sourcesNames.forEach(function (sourceName) {\n\t            var source = sources[sourceName];\n\t            _this2.linkTo(source);\n\t            var sourceData = source.read();\n\t            mergedStructure = mergedStructure.set(sourceName, sourceData);\n\t        });\n\t\n\t        // subscribe to all data changes in parent views\n\t        this.unsubs = sourcesNames.map(function (sourceName) {\n\t            return sources[sourceName].appendReactor(function (data) {\n\t                mergedStructure = mergedStructure.set(sourceName, data);\n\t                _this2.consume(mergedStructure, process);\n\t            });\n\t        });\n\t\n\t        this.digest(process(mergedStructure));\n\t    },\n\t    destroy: function destroy() {\n\t        _Reactor2.default.prototype.destroy.call(this);\n\t\n\t        if (this.unsubs) {\n\t            this.unsubs.forEach(function (func) {\n\t                return func();\n\t            });\n\t        }\n\t\n\t        this.unsubs = null;\n\t    }\n\t});\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = Debounce;\n\t\n\tvar _Reactor = __webpack_require__(5);\n\t\n\tvar _Reactor2 = _interopRequireDefault(_Reactor);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar errorPrefix = 'Immview::Debounce: ';\n\t\n\tfunction Debounce(source) {\n\t    var _this = this;\n\t\n\t    var timeout = arguments.length <= 1 || arguments[1] === undefined ? 0 : arguments[1];\n\t\n\t    _Reactor2.default.call(this);\n\t\n\t    if (!(source && source.subscribe)) {\n\t        throw new Error(errorPrefix + 'incorrect source');\n\t    }\n\t\n\t    this.linkTo(source);\n\t\n\t    this.timeoutID = null;\n\t    this.digest(source.read());\n\t    this.subscription = source.appendReactor(function (data) {\n\t        if (_this.timeoutID) {\n\t            clearTimeout(_this.timeoutID);\n\t        }\n\t        _this.timeoutID = setTimeout(function () {\n\t            _this.timeoutID = null;\n\t            _this.consume(data);\n\t        }, timeout);\n\t    });\n\t}\n\t\n\tDebounce.prototype = _extends({}, _Reactor2.default.prototype, {\n\t    destroy: function destroy() {\n\t        if (this.timeoutID) {\n\t            clearTimeout(this.timeoutID);\n\t            this.timeoutID = null;\n\t        }\n\t        if (this.subscription) {\n\t            this.subscription();\n\t        }\n\t        _Reactor2.default.prototype.destroy.call(this);\n\t    }\n\t});\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = Throttle;\n\t\n\tvar _Reactor = __webpack_require__(5);\n\t\n\tvar _Reactor2 = _interopRequireDefault(_Reactor);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar errorPrefix = 'Immview::Throttle: ';\n\t\n\tfunction Throttle(source) {\n\t    var _this = this;\n\t\n\t    var timeout = arguments.length <= 1 || arguments[1] === undefined ? 0 : arguments[1];\n\t\n\t    _Reactor2.default.call(this);\n\t\n\t    if (!(source && source.subscribe)) {\n\t        throw new Error(errorPrefix + 'incorrect source');\n\t    }\n\t\n\t    this.linkTo(source);\n\t    this.timeoutID = null;\n\t    this.timeoutedData = null;\n\t    this.digest(source.read());\n\t    this.subscription = source.appendReactor(function (data) {\n\t        _this.timeoutedData = data;\n\t        if (!_this.timeoutID) {\n\t            _this.timeoutID = setTimeout(function () {\n\t                _this.timeoutID = null;\n\t                _this.consume(_this.timeoutedData);\n\t            }, timeout);\n\t        }\n\t    });\n\t}\n\t\n\tThrottle.prototype = _extends({}, _Reactor2.default.prototype, {\n\t    destroy: function destroy() {\n\t        if (this.timeoutID) {\n\t            clearTimeout(this.timeoutID);\n\t            this.timeoutID = null;\n\t        }\n\t        if (this.subscription) {\n\t            this.subscription();\n\t        }\n\t        _Reactor2.default.prototype.destroy.call(this);\n\t    }\n\t});\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** immview.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap ffe445e25951fa750832\n **/","import Domain from './Domain.js';\nimport Data from './Data.js';\nimport View from './View.js';\nimport Debounce from './Debounce.js';\nimport Throttle from './Throttle.js';\nimport Dispatcher from './Dispatcher';\n\nconst { dispatch } = Dispatcher;\n\nexport {\n    Data,\n    View,\n    Domain,\n    Debounce,\n    Throttle,\n    Dispatcher,\n    dispatch,\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","import {\n    dispatchDomainAction,\n    rejectContext,\n} from './Dispatcher.js';\n\nconst noop = () => null;\n\nconst errorPrefix = 'Immview::Domain: ';\n\n/**\n * Create a domain holding a view\n * @param {Reactor} stream\n * @optional\n * @param {Object.<function>} actions\n */\nexport default function Domain(stream, actions) {\n    if (stream.subscribe) {\n        this.stream = stream;\n    } else {\n        throw new Error(`${errorPrefix} stream source required`);\n    }\n    this._claimActions(actions);\n}\n\nDomain.prototype = {\n    /**\n     * @private\n     */\n    _claimActions(actions) {\n        /**\n         * @private\n         */\n        this._actionNames = actions ? Object.keys(actions) : [];\n\n        this._actionNames.forEach((actionName) => {\n            if (this[actionName]) {\n                throw new Error(`${errorPrefix}${actionName} is reserved for Domain interface`);\n            }\n\n            if (typeof actions[actionName] !== 'function') {\n                throw new Error(`${errorPrefix}${actionName} action is not a function`);\n            }\n\n            this[actionName] = (...args) => {\n                dispatchDomainAction(actions[actionName], this, args, 1);\n            };\n        });\n    },\n\n    /**\n     * Retrieve last value on stream attached to the Domain\n     * @returns {Iterable}\n     */\n    read() {\n        return this.stream.read();\n    },\n\n    // WRITE ?\n    // no write method now and in the future\n    // as it would encourage developers\n    // to modify domain data\n    // outside of the domain scope\n\n    /**\n     * Create a new stream from a stream attached to the Domain\n     * @param {function(Iterable)} nextProcessor\n     * @returns {View}\n     */\n    map(nextProcessor) {\n        return this.stream.map(nextProcessor);\n    },\n\n    /**\n     * Create a new stream that will not trigger its subscriptions\n     * until given amount of miliseconds will pass from last call\n     * @param {number} timeout\n     * @returns {Debounce}\n     */\n    debounce(timeout) {\n        return this.stream.debounce(timeout);\n    },\n\n    /**\n     * Create a new stream\n     * that will not trigger its subscriptions immediately,\n     * but defers updates for a number of miliseconds\n     * provided with timeout argument\n     * after first call\n     * @param {number} timeout\n     * @returns {Throttle}\n     */\n    throttle(timeout) {\n        return this.stream.throttle(timeout);\n    },\n\n    /**\n     * Register a listener to changes on data stream.\n     * Calls provided method upon registration.\n     * @param reaction\n     * @returns {function()} unsubscribe\n     */\n    subscribe(reaction) {\n        return this.stream.subscribe(reaction);\n    },\n\n    /**\n     * Register a listener to changes on data stream.\n     * @param reaction\n     * @returns {function()} unsubscribe\n     */\n    appendReactor(reaction) {\n        return this.stream.appendReactor(reaction);\n    },\n\n    /**\n     * Remove all subscriptions caused by the domain.\n     * Destroy stream attached to it.\n     * Cancel all currently dispatched actions.\n     */\n    destroy() {\n        // destroy and unmount a structure\n        this.stream.destroy();\n        this.stream = null;\n\n        // remove all queued actions\n        rejectContext(this);\n\n        // unmount all domain methods\n        this._actionNames.forEach((actionName) => {\n            this[actionName] = noop;\n        });\n        this._actionNames = null;\n    },\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Domain.js\n **/","let isRunning = false;\nlet queue = [];\nconst errorPrefix = 'Immview::Dispatcher: ';\n\nconst PRIORITY_EXT = 0;\nconst PRIORITY_DOMAIN = 1;\nconst PRIORITY_DATA_WRITE = 2;\nconst PRIORITY_DATA_CONSUMING = 3;\n\nfunction findMaxPriority() {\n    let maxPriority = -1;\n    let firstOfPriority = null;\n    for (let i = 0; i < queue.length; i++) {\n        const jobPriority = queue[i].priority;\n        if (jobPriority > maxPriority) {\n            firstOfPriority = queue[i];\n            maxPriority = jobPriority;\n        }\n    }\n    return firstOfPriority;\n}\n\nfunction shiftFromQueue() {\n    const toRun = findMaxPriority();\n    queue.splice(\n        queue.indexOf(toRun),\n        1\n    );\n    return toRun;\n};\n\n/**\n * Execute first action of current queue\n */\nconst runFirstQueuedItem = () => {\n    const task = shiftFromQueue();\n    if (task) {\n        const {\n            context,\n            action,\n            args,\n        } = task;\n        action && action.apply(context, args);\n    }\n};\n\n/**\n * Append new action onto end of the queue\n * @param {Function} action\n * @param {*} context\n * @param {Array.<*>} args\n * @param {number} priority (higher number - sooner execution)\n */\nfunction appendToQueue(action, context = null, args = [], priority = PRIORITY_EXT) {\n    queue.push({\n        priority,\n        action,\n        context,\n        args,\n    });\n}\n\n/**\n * Starts executing the queue\n */\nfunction startQueue() {\n    if (isRunning) {\n        return;\n    }\n\n    if (queue.length > 0) {\n        isRunning = true;\n        Dispatcher.tick(() => {\n            try {\n                runFirstQueuedItem();\n            } catch (e) {\n                logError(e);\n            }\n            isRunning = false;\n            startQueue();\n        });\n    }\n}\n\nfunction logError(e) {\n    Dispatcher.logger.error(`${errorPrefix}Error occured while running a function`);\n    if (typeof e === 'object') {\n        if (e.stack) {\n            Dispatcher.logger.error(e.stack);\n        } else {\n            Dispatcher.logger.error(e.name, e.message);\n        }\n    } else {\n        Dispatcher.logger.error(e);\n    }\n}\n\nexport function dispatch(action, context, args, priority) {\n    appendToQueue(action, context, args, priority);\n    startQueue();\n}\n\nexport function dispatchDomainAction(action, context, args) {\n    dispatch(action, context, args, PRIORITY_DOMAIN);\n}\n\nexport function dispatchDataWrite(action, context, args) {\n    dispatch(action, context, args, PRIORITY_DATA_WRITE);\n}\n\nexport function dispatchDataConsume(action, context, args) {\n    dispatch(action, context, args, PRIORITY_DATA_CONSUMING);\n}\n\nexport function dispatchExternal(action, context, args) {\n    dispatch(action, context, args, PRIORITY_EXT);\n}\n\n/**\n * Removes all queued actions tied with a context\n * @param context\n */\nexport function rejectContext(context) {\n    queue = queue.filter(item => item.context !== context);\n}\n\nexport const Dispatcher = {\n\n    /**\n     * Place provided function on a queue and run it as soon as possible\n     * @param {function} action\n     * @param {*} [context]\n     * @param {Array.<*>} [args]\n     * @param {number} [priority=0] priority for dispatched action. 0, 1, 2 are acceptable\n     */\n    dispatch: dispatchExternal,\n\n    tick(func) {\n        func();\n    },\n\n    rejectContext,\n\n    logger: console,\n};\n\nexport default Dispatcher;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Dispatcher.js\n **/","import {\n    fromJS,\n} from 'immutable';\n\nimport { dispatchDataWrite } from './Dispatcher';\nimport Reactor from './Reactor.js';\n\nexport default function Data(initialData) {\n    Reactor.call(this);\n\n    this.linkTo(null);\n    this.digest(fromJS(initialData));\n}\n\nData.prototype = {\n    ...Reactor.prototype,\n    /**\n     * Dispatch a change instruction to the Data\n     * @param {Iterable|function(data: Iterable):Iterable} change\n     */\n    write(change) {\n        dispatchDataWrite(() => {\n            if (typeof change === 'function') {\n                this.consume(this.read(), change);\n            } else {\n                this.consume(change);\n            }\n        });\n    },\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Data.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"immutable\"\n ** module id = 4\n ** module chunks = 0\n **/","import {\n    Set,\n    is,\n} from 'immutable';\n\nimport {\n    scheduleLength,\n    scheduleJob,\n    runScheduledPriorityJob,\n    createSchedule,\n    copyQueueOntoSchedule,\n} from './streamScheduler';\n\nimport {\n    dispatchDataWrite,\n    dispatchDataConsume,\n} from './Dispatcher';\n\nfunction hasValue(v) {\n    return (\n        v !== undefined &&\n        v !== null\n    );\n}\n\nfunction shouldStructureBeReplaced(structure, candidate) {\n    return (\n        hasValue(candidate) && (\n            !hasValue(structure) ||\n            !is(candidate, structure)\n        )\n    );\n};\n\nlet digestLinks = [];\nlet digestQueue = [];\n\nfunction restoreNodeJobs(edges, currentSchedule) {\n    const digestJobMap = createSchedule(edges);\n    return copyQueueOntoSchedule(currentSchedule, digestJobMap);\n}\n\nfunction doNextJob() {\n    if (scheduleLength(digestQueue) > 0) {\n        digestQueue = runScheduledPriorityJob(digestQueue);\n        dispatchDataWrite(doNextJob);\n    }\n}\n\nfunction identity(v) {\n    return v;\n}\n\nexport default function Reactor() {\n    /**\n     * @private\n     */\n    this.reactors = Set();\n}\n\nReactor.prototype = {\n    read() {\n        return this.structure;\n    },\n\n    linkTo(sourceNode) {\n        digestLinks.push([\n            sourceNode && (sourceNode.stream ? sourceNode.stream : sourceNode),\n            this,\n        ]);\n        digestQueue = restoreNodeJobs(digestLinks, digestQueue);\n    },\n\n    unlink() {\n        digestLinks = digestLinks.filter(link => link[0] !== this && link[1] !== this);\n        digestQueue = restoreNodeJobs(digestLinks, digestQueue);\n    },\n\n    consume(data, chew = identity) {\n        dispatchDataConsume(() => {\n            digestQueue = scheduleJob(this, () => this.digest(chew(data)), digestQueue);\n            dispatchDataWrite(doNextJob);\n        });\n    },\n\n    digest(data) {\n        if (shouldStructureBeReplaced(this.structure, data)) {\n            this.structure = data;\n            this.flush();\n        }\n    },\n\n    /**\n     * @param {function} reaction\n     * @returns {function()}\n     */\n    appendReactor(reaction) {\n        this.reactors = this.reactors.add(reaction);\n        return () => {\n            this.reactors = this.reactors.delete(reaction);\n        };\n    },\n\n    /**\n     * @param {function} reaction\n     * @returns {function()}\n     */\n    subscribe(reaction) {\n        reaction(this.read());\n        return this.appendReactor(reaction);\n    },\n\n    flush() {\n        this.reactors.forEach(reaction => reaction(this.read()));\n    },\n\n    destroy() {\n        this.unlink();\n        this.structure = null;\n        this.reactors = Set();\n    },\n\n    map(processor) {\n        const View = require('./View.js').default;\n        return new View(this, processor);\n    },\n\n    debounce(timeout) {\n        const Debounce = require('./Debounce.js').default;\n        return new Debounce(this, timeout);\n    },\n\n    throttle(timeout) {\n        const Throttle = require('./Throttle.js').default;\n        return new Throttle(this, timeout);\n    },\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Reactor.js\n **/","import {\n    getOrder,\n} from './graphSort.js';\n\nexport const sortStreamGraph = getOrder;\n\nexport function createSchedule(graph) {\n    return sortStreamGraph(graph)\n        .reduce(\n            (jobMap, node) => {\n                jobMap.unshift([node, null]);\n                return jobMap;\n            },\n            []\n        );\n}\n\nexport function scheduleJob(contextNode, nodeNewJob, schedule) {\n    const newSchedule = [];\n    for (let i = 0; i < schedule.length; i++) {\n        const entry = schedule[i];\n        const currentNode = entry[0];\n        if (currentNode === contextNode) {\n            newSchedule.push([currentNode, nodeNewJob]);\n        } else {\n            newSchedule.push(entry);\n        }\n    }\n    return newSchedule;\n}\n\nexport function scheduleLength(schedule) {\n    let length = 0;\n    for (let i = 0; i < schedule.length; i++) {\n        length += (!!schedule[i][1]) | 0;\n    }\n    return length;\n}\n\nexport function findJob(queue, contextNode) {\n    for (let i = 0; i < queue.length; i++) {\n        if (queue[i][0] === contextNode) {\n            return queue[i][1];\n        }\n    }\n    return null;\n}\n\nexport function copyQueueOntoSchedule(source, target) {\n    const result = [].concat(target);\n    for (let i = 0; i < source.length; i++) {\n        const sourceEntry = source[i];\n        const sourceEntryNode = sourceEntry[0];\n        const sourceEntryJob = sourceEntry[1];\n\n        if (sourceEntryJob) {\n            for (let j = 0; j < result.length; j++) {\n                const targetEntry = result[j];\n                const targetEntryNode = targetEntry[0];\n                if (targetEntryNode === sourceEntryNode) {\n                    result[j] = sourceEntry;\n                }\n            }\n        }\n    }\n    return result;\n}\n\nexport function runScheduledPriorityJob(schedule) {\n    let currentJob = null;\n    let restOfJobs = [].concat(schedule);\n    for (let i = 0; i < schedule.length; i++) {\n        const entry = schedule[i];\n        const node = entry[0];\n        const job = entry[1];\n        if (job && !currentJob) {\n            currentJob = job;\n            restOfJobs[i] = [node, null];\n        }\n    };\n    if (currentJob) {\n        currentJob();\n    }\n    return restOfJobs;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/streamScheduler.js\n **/","export function getGraphNodes(edges) {\n    return edges.reduce(\n        (result, edge) => {\n            if (result.indexOf(edge[0]) < 0) {\n                result.push(edge[0]);\n            }\n            if (result.indexOf(edge[1]) < 0) {\n                result.push(edge[1]);\n            }\n            return result;\n        },\n        []\n    );\n}\n\nexport function getOrder(edges) {\n    let visited = [];\n    let stack = [];\n    getGraphNodes(edges).forEach(node => {\n        if (!visited || visited.indexOf(node) < 0) {\n            const result = visit(edges, node, stack, visited);\n            visited = result.visited;\n            stack = result.stack;\n        }\n    });\n    return stack;\n}\n\nexport function visit(edges, node, stack, visited) {\n    let tmpVisited = visited.concat([node]);\n    let tmpStack = stack;\n    getNodeChildren(edges, node).forEach(childNode => {\n        if (!tmpVisited || tmpVisited.indexOf(childNode) < 0) {\n            const result = visit(edges, childNode, tmpStack, tmpVisited);\n            tmpVisited = result.visited;\n            tmpStack = result.stack;\n        }\n    });\n    return {\n        visited: tmpVisited,\n        stack: tmpStack.concat([node]),\n    };\n}\n\nexport function getNodeChildren(edges, node) {\n    return edges.filter(edge => edge[0] === node).map(edge => edge[1]);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/graphSort.js\n **/","import {\n    Map,\n} from 'immutable';\nimport Reactor from './Reactor.js';\n\nconst identity = data => data;\n\nexport default function View(source, process = identity) {\n    Reactor.call(this);\n\n    if (source && typeof source === 'object') {\n        if (source.subscribe) {\n            this.connectToSource(source, process);\n        } else {\n            this.connectToMultipleSources(source, process);\n        }\n    }\n}\n\nView.prototype = {\n    ...Reactor.prototype,\n\n    /**\n     * @private\n     * @param {Reactor} source\n     */\n    connectToSource(source, process) {\n        this.linkTo(source);\n        this.digest(process(source.read()));\n        this.unsubs = [\n            source.appendReactor(data => this.digest(process(data))),\n        ];\n    },\n\n    /**\n     * @private\n     * @param {Object.<Reactor>} sources\n     */\n    connectToMultipleSources(sources, process) {\n        // initialize as a map{string:Iterable}\n        let mergedStructure = Map();\n\n        const sourcesNames = Object.keys(sources);\n\n        // prefill mergedStructure before launching subscriptions\n        sourcesNames.forEach(sourceName => {\n            const source = sources[sourceName];\n            this.linkTo(source);\n            const sourceData = source.read();\n            mergedStructure = mergedStructure.set(sourceName, sourceData);\n        });\n\n        // subscribe to all data changes in parent views\n        this.unsubs = sourcesNames.map(\n            sourceName => sources[sourceName].appendReactor(\n                data => {\n                    mergedStructure = mergedStructure.set(sourceName, data);\n                    this.consume(mergedStructure, process);\n                }\n            )\n        );\n\n        this.digest(process(mergedStructure));\n    },\n\n    destroy() {\n        Reactor.prototype.destroy.call(this);\n\n        if (this.unsubs) {\n            this.unsubs.forEach(func => func());\n        }\n\n        this.unsubs = null;\n    },\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/View.js\n **/","import Reactor from './Reactor.js';\n\nconst errorPrefix = 'Immview::Debounce: ';\n\nexport default function Debounce(source, timeout = 0) {\n    Reactor.call(this);\n\n    if (!(source && source.subscribe)) {\n        throw new Error(`${errorPrefix}incorrect source`);\n    }\n\n    this.linkTo(source);\n\n    this.timeoutID = null;\n    this.digest(source.read());\n    this.subscription = source.appendReactor(data => {\n        if (this.timeoutID) {\n            clearTimeout(this.timeoutID);\n        }\n        this.timeoutID = setTimeout(() => {\n            this.timeoutID = null;\n            this.consume(data);\n        }, timeout);\n    });\n}\n\nDebounce.prototype = {\n    ...Reactor.prototype,\n\n    destroy() {\n        if (this.timeoutID) {\n            clearTimeout(this.timeoutID);\n            this.timeoutID = null;\n        }\n        if (this.subscription) {\n            this.subscription();\n        }\n        Reactor.prototype.destroy.call(this);\n    },\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Debounce.js\n **/","import Reactor from './Reactor.js';\n\nconst errorPrefix = 'Immview::Throttle: ';\n\nexport default function Throttle(source, timeout = 0) {\n    Reactor.call(this);\n\n    if (!(source && source.subscribe)) {\n        throw new Error(`${errorPrefix}incorrect source`);\n    }\n\n    this.linkTo(source);\n    this.timeoutID = null;\n    this.timeoutedData = null;\n    this.digest(source.read());\n    this.subscription = source.appendReactor(data => {\n        this.timeoutedData = data;\n        if (!this.timeoutID) {\n            this.timeoutID = setTimeout(() => {\n                this.timeoutID = null;\n                this.consume(this.timeoutedData);\n            }, timeout);\n        }\n    });\n}\n\nThrottle.prototype = {\n    ...Reactor.prototype,\n\n    destroy() {\n        if (this.timeoutID) {\n            clearTimeout(this.timeoutID);\n            this.timeoutID = null;\n        }\n        if (this.subscription) {\n            this.subscription();\n        }\n        Reactor.prototype.destroy.call(this);\n    },\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Throttle.js\n **/"],"sourceRoot":""}