{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap cc5fa5bdae68d8e343c9","webpack:///./src/index.js","webpack:///./src/Data.js","webpack:///external \"immutable\"","webpack:///./src/Reactor.js","webpack:///./src/View.js","webpack:///./src/ImmutableWrapper.js"],"names":[],"mappings":"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","file":"immview.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"immutable\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"immutable\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"immview\"] = factory(require(\"immutable\"));\n\telse\n\t\troot[\"immview\"] = factory(root[\"immutable\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap cc5fa5bdae68d8e343c9\n **/","var Data = require('./Data.js');\nvar View = require('./View.js');\n\nmodule.exports = {\n    Data,\n    View,\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","var I = require('immutable');\nvar Reactor = require('./Reactor.js');\nvar View = require('./View.js');\n\nvar {\n    immutableWriteWrapper,\n    immutableReadWrapper,\n} = require('./ImmutableWrapper.js');\n\nclass Data extends Reactor {\n\n    constructor(initialData) {\n        super();\n        this.digest(I.fromJS(initialData));\n        immutableReadWrapper(this);\n        immutableWriteWrapper(this);\n    }\n\n    get isData() {\n        return true;\n    }\n\n    process(data) {\n        return data;\n    }\n\n}\n\nmodule.exports = Data;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Data.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"immutable\"\n ** module id = 2\n ** module chunks = 0\n **/","var I = require('immutable');\n\nclass Reactor {\n    constructor() {\n        this.reactors = I.Set();\n        this.structure = undefined; //yet declared\n    }\n\n    get isReactor() {\n        return true;\n    }\n\n    subscribe(reaction) {\n        this.reactors = this.reactors.add(reaction);\n        return () => {\n            this.reactors = this.reactors.delete(reaction);\n        };\n    }\n\n    process() {\n        throw new Error('abstract');\n    }\n\n    digest(data) {\n        var newValue = this.process(data);\n        if (newValue !== this.structure) {\n            this.flush(this.structure = newValue);\n        }\n    }\n\n    flush(data) {\n        this.reactors.forEach(reactor => reactor(data));\n    }\n\n    destroy() {\n        throw new Error('abstract');\n    }\n}\n\nmodule.exports = Reactor;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Reactor.js\n **/","var I = require('immutable');\nvar Reactor = require('./Reactor.js');\n\nvar { immutableReadWrapper } = require('./ImmutableWrapper.js');\n\nclass View extends Reactor {\n\n    constructor(source, process) {\n        super();\n\n        if (process) {\n            this.process = process;\n        }\n\n        immutableReadWrapper(this);\n\n        if (source && typeof source === 'object') {\n            if (source.isReactor) {\n                this.connectToView(source);\n            } else {\n                this.connectToViews(source);\n            }\n        }\n    }\n\n    /**\n     * @private\n     * @param {Reactor} masterView\n     */\n    connectToView(masterView) {\n        this.unsubs = [masterView.subscribe(this.digest.bind(this))];\n        this.digest(masterView.structure);\n    }\n\n    /**\n     * @private\n     * @param {Object.<Reactor>} views\n     */\n    connectToViews(views) {\n        this.prestructure = I.Map();\n        this.unsubs = Object.keys(views).map(viewName => {\n            var sub = data => {\n                this.digest(\n                    this.prestructure = this.prestructure.set(viewName, data)\n                );\n            };\n\n            sub(views[viewName].structure);\n\n            return views[viewName].subscribe(sub);\n        });\n    }\n\n    get isView() {\n        return true;\n    }\n\n    /**\n     * @private\n     * @param {*} data\n     * @returns {*}\n     */\n    process(data) {\n        return data;\n    }\n\n    destroy() {\n        this.unsubs.forEach(func => func());\n    }\n\n}\n\nmodule.exports = View;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/View.js\n **/","/**\n * adds read methods to `that`\n * that enable reading from its structure\n *\n * @param  {Reactor} decorator subject\n * @return {void}\n */\nfunction immutableReadWrapper(that) {\n    [\n        'get',\n        'has',\n        'getIn',\n        'hasIn',\n        'includes',\n        'first',\n        'last',\n        'toJS',\n    ].forEach(prop => {\n        that[prop] = that[prop] || (function() {\n            return that.structure[prop].apply(that.structure, arguments);\n        });\n    });\n}\n\n/**\n * adds write methods of Iterable interface to Reactor\n * so they can trigger Reactor digesting of new value\n *\n * @param  {Reactor} decorator subject\n * @return {void}\n */\nfunction immutableWriteWrapper(that) {\n    [\n        'set',\n        'delete',\n        'update',\n        'merge',\n        'mergeDeep',\n        'setIn',\n        'deleteIn',\n        'updateIn',\n        'mergeIn',\n        'mergeDeepIn',\n  ].forEach(prop => {\n      that[prop] = that[prop] || (function() {\n          return that.digest(that.structure[prop].apply(that.structure, arguments));\n      }.bind(that));\n  });\n}\n\nmodule.exports = {\n    immutableWriteWrapper,\n    immutableReadWrapper,\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ImmutableWrapper.js\n **/"],"sourceRoot":""}