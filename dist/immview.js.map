{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 500fc0824a47e6b6fb5a","webpack:///./src/index.js","webpack:///./src/Domain.js","webpack:///external \"immutable\"","webpack:///./src/Queue.js","webpack:///./src/Data.js","webpack:///./src/Reactor.js","webpack:///./src/ImmutableWrapper.js","webpack:///./src/View.js"],"names":[],"mappings":"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","file":"immview.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"immutable\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"immutable\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"immview\"] = factory(require(\"immutable\"));\n\telse\n\t\troot[\"immview\"] = factory(root[\"immutable\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 500fc0824a47e6b6fb5a\n **/","import Domain from './Domain.js';\nimport Data from './Data.js';\nimport View from './View.js';\n\nexport {\n    Data,\n    View,\n    Domain,\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","import * as I from 'immutable';\n\nimport Queue from './Queue.js';\n\nlet noop = () => {};\n\nexport default class Domain {\n    /**\n     * Create a domain holding a view\n     * @param {Reactor} view\n     */\n    constructor(view, actions) {\n        /** @type {View} */\n        this.view = null;\n        /** @type {Data} */\n        this.data = null;\n        /** @type {String[]} */\n        this._actionNames = null;\n\n        this._claimView(view);\n        this._claimActions(actions);\n    }\n\n    _claimView(view) {\n        if (view.isReactor) {\n            this.view = view;\n\n            if (view.isData) {\n                this.data = view;\n            }\n        } else {\n            throw new Error('view is not inheriting Reactor type');\n        }\n    }\n\n    _claimActions(actions) {\n        this._actionNames = actions ? Object.keys(actions) : [];\n\n        this._actionNames.forEach((actionName) => {\n            if (this[actionName]) {\n                throw new Error('\"' + actionName + '\" is reserved for Domain interface');\n            }\n\n            this[actionName] = Queue.createAction(actions[actionName], this);\n        });\n    }\n\n    get structure() {\n        return this.view && this.view.structure;\n    }\n\n    get isDomain() {\n        return true;\n    }\n\n    subscribe(reaction) {\n        return this.view.subscribe(reaction);\n    }\n\n    destroy() {\n        // destroy and unmount a structure\n        this.view.destroy();\n        this.view = null;\n        this.data = null;\n\n        // remove all queued actions\n        Queue.rejectContext(this);\n\n        // unmount all domain methods\n        this._actionNames.forEach((actionName) => {\n            this[actionName] = noop;\n        });\n        this._actionNames = null;\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Domain.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"immutable\"\n ** module id = 2\n ** module chunks = 0\n **/","import * as I from 'immutable';\n\nlet isRunning = false;\nlet queue = I.OrderedSet();\n\n/**\n * Returns a function that is queueable version of provided one.\n * @param {Function} action\n * @param {*} [context]\n * @returns {Function}\n */\nfunction createAction(action, context) {\n    return (...args) => {\n        appendToQueue(action, context, args);\n        run();\n    };\n}\n\n/**\n * Append new action onto end of the queue\n * @param {Function} action\n * @param {*} context\n * @param {Array.<*>} args\n */\nfunction appendToQueue(action, context, args) {\n    queue = queue.add({\n        action,\n        context,\n        args,\n    });\n}\n\n/**\n * Removes and returns first action from the queue and\n * @returns {{action:Function,context,args:Array.<*>}}\n */\nfunction shiftFromQueue() {\n    let toRun = queue.first();\n    queue = queue.rest();\n    return toRun;\n}\n\n/**\n * Removes all queued actions tied with a context\n * @param context\n */\nfunction rejectContext(context) {\n    queue = queue.filter(item => item.context !== context);\n}\n\n/**\n * Starts executing the queue\n */\nfunction run() {\n    if (isRunning) {\n        return;\n    }\n\n    isRunning = true;\n\n    while (queue.count() > 0) {\n        try {\n            runFirst();\n        } catch (e) {\n            console.error('Immview.Queue run - Error occured while running running a function');\n            console.error(e.message);\n        }\n    }\n\n    isRunning = false;\n}\n\n/**\n * Execute first action of current queue\n */\nfunction runFirst() {\n    let toRun = shiftFromQueue();\n    let {\n        context,\n        action,\n        args,\n        } = toRun;\n    action.apply(context, args);\n}\n\nexport default {\n    createAction,\n    rejectContext,\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Queue.js\n **/","import * as I from 'immutable';\n\nimport Reactor from './Reactor.js';\n\nvar {\n    immutableWriteWrapper,\n    immutableReadWrapper,\n    } = require('./ImmutableWrapper.js');\n\nexport default class Data extends Reactor {\n\n    constructor(initialData) {\n        super();\n\n        immutableReadWrapper(this);\n        immutableWriteWrapper(this);\n\n        this.digest(I.fromJS(initialData));\n    }\n\n    get isData() {\n        return true;\n    }\n\n    process(data) {\n        return data;\n    }\n\n    destroy() {\n        this.structure = null;\n        this.reactors = null;\n    }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Data.js\n **/","import * as I from 'immutable';\n\nexport default class Reactor {\n    constructor() {\n        this.reactors = I.Set();\n        this.structure = undefined; //yet declared\n    }\n\n    get isReactor() {\n        return true;\n    }\n\n    subscribe(reaction) {\n        this.reactors = this.reactors.add(reaction);\n        reaction(this.structure);\n        return () => {\n            this.reactors = this.reactors.delete(reaction);\n        };\n    }\n\n    process() {\n        throw new Error('abstract');\n    }\n\n    digest(data) {\n        var newValue = this.process(data);\n        if (newValue !== this.structure) {\n            this.structure = newValue;\n            this.flush();\n        }\n    }\n\n    flush() {\n        this.reactors.forEach(reactor => reactor(this.structure));\n    }\n\n    destroy() {\n        throw new Error('abstract');\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Reactor.js\n **/","import Queue from './Queue';\n\n/**\n * adds read methods to `that`\n * that enable reading from its structure\n *\n * @param  {Reactor} decorator subject\n * @return {void}\n */\nfunction immutableReadWrapper(that) {\n    [\n        'equals',\n        'hashCode',\n\n        'get',\n        'has',\n        'includes',\n        'first',\n        'last',\n\n        'getIn',\n        'hasIn',\n\n        'toJS',\n        'toObject',\n        'toArray',\n\n        'toMap',\n        'toOrderedMap',\n        'toSet',\n        'toOrderedSet',\n        'toList',\n        'toStack',\n        'toSeq',\n        'toKeyedSeq',\n        'toIndexedSeq',\n        'toSetSeq',\n\n        'keys',\n        'values',\n        'entries',\n\n        'keySeq',\n        'valueSeq',\n        'entrySeq',\n\n        'map',\n        'filter',\n        'filterNot',\n        'reverse',\n        'sort',\n        'sortBy',\n        'groupBy',\n        'forEach',\n\n        'slice',\n        'rest',\n        'butLast',\n        'skip',\n        'skipLast',\n        'skipWhile',\n        'skipUntil',\n        'take',\n        'takeLast',\n        'takeWhile',\n        'takeUntil',\n\n        'concat',\n        'flatten',\n        'flatMap',\n\n        'reduce',\n        'reduceRight',\n        'every',\n        'some',\n        'join',\n        'isEmpty',\n        'count',\n        'countBy',\n\n        'find',\n        'findLast',\n        'findEntry',\n        'findLastEntry',\n        'max',\n        'maxBy',\n        'min',\n        'minBy',\n\n        'isSubset',\n        'isSuperset',\n    ].forEach(prop => {\n        that[prop] = function (...args) {\n            return that.structure[prop].apply(that.structure, args);\n        };\n    });\n}\n\n/**\n * adds write methods of Iterable interface to Reactor\n * so they can trigger Reactor digesting of new value\n *\n * @param  {Reactor} decorator subject\n * @return {void}\n */\nfunction immutableWriteWrapper(that) {\n    [\n        'set',\n        'delete',\n        'update',\n        'merge',\n        'mergeDeep',\n        'setIn',\n        'deleteIn',\n        'updateIn',\n        'mergeIn',\n        'mergeDeepIn',\n    ].forEach(prop => {\n        that[prop] = Queue.createAction(function (...args) {\n            that.digest(that.structure[prop].apply(that.structure, args));\n        });\n    });\n}\n\nexport {\n    immutableWriteWrapper,\n    immutableReadWrapper,\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ImmutableWrapper.js\n **/","import * as I from 'immutable';\nimport Reactor from './Reactor.js';\n\nimport { immutableReadWrapper } from './ImmutableWrapper.js';\n\nexport default class View extends Reactor {\n\n    constructor(source, process) {\n        super();\n\n        if (process) {\n            this.process = process;\n        }\n\n        immutableReadWrapper(this);\n\n        if (source && typeof source === 'object') {\n            if (source.isReactor || source.isDomain) {\n                this.connectToView(source);\n            } else {\n                this.connectToViews(source);\n            }\n        }\n    }\n\n    /**\n     * @private\n     * @param {Reactor} masterView\n     */\n    connectToView(masterView) {\n        this.unsubs = [masterView.subscribe(this.digest.bind(this))];\n    }\n\n    /**\n     * @private\n     * @param {Object.<Reactor>} views\n     */\n    connectToViews(views) {\n        this.prestructure = I.Map();\n        this.unsubs = Object.keys(views).map(viewName => {\n            var sub = data => {\n                this.digest(\n                    this.prestructure = this.prestructure.set(viewName, data)\n                );\n            };\n\n            return views[viewName].subscribe(sub);\n        });\n    }\n\n    get isView() {\n        return true;\n    }\n\n    /**\n     * @private\n     * @param {*} data\n     * @returns {*}\n     */\n    process(data) {\n        return data;\n    }\n\n    destroy() {\n        this.unsubs.forEach(func => func());\n        this.unsubs = null;\n        this.structure = null;\n        this.prestructure = null;\n        this.reactors = null;\n    }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/View.js\n **/"],"sourceRoot":""}